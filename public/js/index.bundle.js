!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=(s.prototype.width=function(){return this.drag.$el.offsetWidth},s.prototype.height=function(){return this.drag.$el.offsetHeight},s.prototype.setContent=function(t){this.$contentBox.append(t)},s.prototype.remove=function(){this.$el.remove()},s.prototype.select=function(){this.$topBar.show(),this.$bottomBar.show(),this.$contentBox.addClass("selected"),this.resetPositionInfo()},s.prototype.resetPositionInfo=function(){var t=this.drag.$el.style.left,e=this.drag.$el.style.top;this.$inputX.val(parseInt(t||0)),this.$inputY.val(parseInt(e||0)),this.$inputWidth.val(this.width()),this.$inputHeight.val(this.height())},s.prototype.unselect=function(){this.$topBar.hide(),this.$bottomBar.hide(),this.$contentBox.removeClass("selected")},s.prototype.mount=function(t){var e=this;(this.stage=t).$canvas.append(this.$el);var i=new n.default(this.$el[0],{allowOverstep:!1,minWidth:this.minWidth,minHeight:this.minHeight,dragAnchor:this.$contentBox[0]});(this.drag=i).onMove=function(){e.resetPositionInfo()},i.onResize=function(){e.resetPositionInfo()},this.$contentBox.on("mousedown",function(i){t.curSelectedComponent!=e&&t.selectComponent(e)}),this.$topBar.find(".delete").on("mousedown",function(i){i.stopPropagation(),t.removeComponent(e)}),this.$topBar.on("mousedown",function(t){t.stopPropagation()}),this.$bottomBar.on("mousedown",function(t){t.stopPropagation()})},s);function s(t){void 0===t&&(t="");var e=$('\n      <div class="component-box">\n        <div class="top-bar">\n          <span class="setting" title="编辑"></span>\n          <span class="lock"></span>\n          <span class="delete"></span>\n        </div>\n        <div class="content-box">\n        </div>\n        <div class="bottom-bar">\n          <span>X:<input type="text" value="0"></span>\n          <span>Y:<input type="text" value="0"></span>\n          <span>宽:<input type="text" value="0"></span>\n          <span>高:<input type="text" value="0"></span>\n          <span class="confirm">确定</span>\n        </div>\n      </div>\n    ');this.$contentBox=e.find(".content-box"),t&&e.addClass(t),this.$el=e,this.$topBar=e.find(".top-bar"),this.$bottomBar=e.find(".bottom-bar"),this.minWidth=24,this.minHeight=24,this.$inputX=this.$bottomBar.find("span:nth-child(1) input"),this.$inputY=this.$bottomBar.find("span:nth-child(2) input"),this.$inputWidth=this.$bottomBar.find("span:nth-child(3) input"),this.$inputHeight=this.$bottomBar.find("span:nth-child(4) input")}e.default=o},function(t,e){t.exports=window.jQuery},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(o.prototype.init=function(){"string"==typeof this.$el&&(this.$el=document.querySelector(this.$el));var t=this.option;t.parent&&"string"==typeof t.parent&&(this.option.parent=document.querySelector(t.parent)),t.alignLineColor||(t.alignLineColor="#FF4AFF"),t.alignGap||(t.alignGap=3),t.resizeGap||(t.resizeGap=5),t.alignLineSize||(t.alignLineSize=1),void 0===t.isShowDist&&(t.isShowDist=!0),void 0===t.resizable&&(t.resizable=!0),void 0===t.minWidth&&(t.minWidth=24),void 0===t.minHeight&&(t.minHeight=24),this.setupEvent()},o.prototype.isTouch=function(){return"ontouchstart"in window},o.prototype.stopPropagation=function(t){window.event?window.event.cancelBubble=!0:t.stopPropagation()},o.prototype.getEventInfo=function(t){return this.isTouch()?t.targetTouches[0]:t},o.prototype.checkResize=function(t,e,i){var n=t.getBoundingClientRect(),o=this.option.resizeGap,s=this.resizeFlags;return e>=n.right-o&&e<=n.right&&i>=n.top&&i<=n.top+o?s[4]:e>=n.left&&e<=n.left+o&&i>=n.top&&i<=n.top+o?s[5]:e>=n.right-o&&e<=n.right&&i>=n.bottom-o&&i<=n.bottom?s[6]:e>=n.left&&e<=n.left+o&&i>=n.bottom-o&&i<=n.bottom?s[7]:i>=n.top&&i<=n.top+o?s[0]:e>=n.right-o&&e<=n.right?s[1]:i>=n.bottom-o&&i<=n.bottom?s[2]:e>=n.left&&e<=n.left+o?s[3]:null},o.prototype.darg=function(t){var e,i,n=this,o=this.EVENTS,s=0,r=0,l=0,a=0,h=this.option.parent||this.$el.offsetParent,p=0,c=0,u=this.option,d=n.getEventInfo(t);function g(t){var e=n.getEventInfo(t),i=e.clientX-s,o=e.clientY-r,h=u.minLeft?u.minLeft:0,d=u.minTop?u.minTop:0;n.option.allowOverstep||(i<h&&(i=h),o<d&&(o=d),p<i+l&&(i=p-l),c<o+a&&(o=c-a)),n.$el.style.position="absolute",n.$el.style.left=i+"px",n.$el.style.top=o+"px",n.option.alignDrags&&n.checkAlign(),n.onMove&&n.onMove(e)}n.isDrag=!0,s=d.clientX-n.$el.offsetLeft,r=d.clientY-n.$el.offsetTop,l=n.$el.offsetWidth,a=n.$el.offsetHeight,e=document.documentElement.clientWidth,i=document.documentElement.clientHeight,p=h.clientWidth||e,c=h.clientHeight||i,document.addEventListener(o[1],g),document.addEventListener(o[2],function t(e){var i=n.getEventInfo(e);n.isDrag=!1,document.removeEventListener(o[1],g),document.removeEventListener(o[2],t),n.onEnd&&n.onEnd(i),n.clearAlignLine()}),n.onStart&&n.onStart(d)},o.prototype.resize=function(t){var e=this.EVENTS,i=this,n=(t=this.getEventInfo(t)).clientX,o=t.clientY,s=this.$el.offsetHeight,r=this.$el.offsetWidth,l=s,a=r,h=parseInt(this.getStyle(this.$el,"top")),p=parseInt(this.getStyle(this.$el,"left")),c=h,u=p;this.isResizing=!0;var d=this.option.parent||this.$el.offsetParent,g=document.documentElement.clientWidth,f=document.documentElement.clientHeight,v=d.clientWidth||g,m=d.clientHeight||f,y=this.option.minWidth,b=this.option.minHeight;function $(t){var e=t.clientY-o;(s-=e)<b&&(s=b),c+l<s&&(s=c+l),(h+=e)<0&&(h=0),c+(l-b)<h&&(h=c+(l-b)),i.$el.style.top=h+"px",i.$el.style.height=s+"px"}function E(t){(r+=t.clientX-n)<y&&(r=y),v-u<r&&(r=v-u),i.$el.style.width=r+"px"}function w(t){(s+=t.clientY-o)<b&&(s=b),m-c<s&&(s=m-c),i.$el.style.height=s+"px"}function x(t){(r-=t.clientX-n)<y&&(r=y),u+a<r&&(r=u+a),(p+=t.clientX-n)<0&&(p=0),u+(a-y)<p&&(p=u+(a-y)),i.$el.style.left=p+"px",i.$el.style.width=r+"px"}function S(t){t=i.getEventInfo(t),i.resizeFlag===i.resizeFlags[0]?$(t):i.resizeFlag===i.resizeFlags[1]?E(t):i.resizeFlag===i.resizeFlags[2]?w(t):i.resizeFlag===i.resizeFlags[3]?x(t):i.resizeFlag===i.resizeFlags[4]?($(t),E(t)):i.resizeFlag===i.resizeFlags[5]?($(t),x(t)):i.resizeFlag===i.resizeFlags[6]?(w(t),E(t)):i.resizeFlag===i.resizeFlags[7]&&(w(t),x(t)),o=t.clientY,n=t.clientX,i.onResize&&i.onResize()}document.addEventListener(e[1],S),document.addEventListener(e[2],function t(n){i.isResizing=!1,document.removeEventListener(e[1],S),document.removeEventListener(e[2],t)})},o.prototype.start=function(t){t.preventDefault(),this.stopPropagation(t),this.resizeFlag?this.resize(t):this.darg(t)},o.prototype.setupEvent=function(){var t=this,e=this.EVENTS,i=this,n=this.option.dragAnchor?this.option.dragAnchor:this.$el;this.option.resizable&&n.addEventListener(e[1],function(e){if(!t.isResizing){var o=i.getEventInfo(e),s=i.checkResize(n,o.clientX,o.clientY);t.resizeFlag=s,n.style.cursor=s||"move"}}),n.addEventListener(e[0],this.start.bind(this))},o.prototype.setAlignDrags=function(t){this.option.alignDrags=t},o.prototype.getStyle=function(t,e){return window.getComputedStyle?document.defaultView.getComputedStyle(t,null).getPropertyValue(e):t.currentStyle?t.currentStyle[e]:null},o.prototype.getClientRect=function(t){var e=t.getBoundingClientRect(),i=this.option.parent||this.$el.offsetParent,n={},o=parseInt(this.getStyle(i,"border-left-width")),s=parseInt(this.getStyle(i,"border-top-width")),r=i.getBoundingClientRect();return n.left=e.left-r.left-o,n.top=e.top-r.top-s,n.right=n.left+e.width,n.bottom=n.top+e.height,n.width=e.width,n.height=e.height,n},o.prototype.isAlign=function(t,e){var i=this.option.alignGap;return Math.abs(t-e)<=i},o.prototype.clearAlignLine=function(){Array.apply(null,document.querySelectorAll(".align-line")).forEach(function(t){t.parentNode.removeChild(t)})},o.prototype.createDistText=function(t,e,i){var n=this.option.alignLineColor,o=i.top,s=i.bottom,r=i.left,l=i.right,a=i.width,h=i.height,p=a/2,c=h/2,u=e.width/2,d=e.height/2,g=document.createElement("div");g.style.position="absolute",g.style.textAlign="center";var f=document.createElement("span"),v=0;f.style.background=n,f.style.borderRadius="2px",f.style.lineHeight="14px",f.style.padding="0 2px",f.style.fontSize="10px",f.style.color="#ffffff",f.style.userSelect="none",g.appendChild(f);var m=this.alignFlags;if(t===m[0]||t===m[1]||t===m[3]||t===m[4]){if(g.style.bottom="0px",r<e.left?(v=e.left-l,g.style.left=a+"px"):(v=r-e.right,g.style.left=e.width+"px"),(v=Math.round(v))<0)return null;g.style.width=v+"px",g.style.paddingBottom="2px",f.innerText=v+"px"}else if(t===m[2]||t===m[10]||t===m[11]){if(g.style.bottom="0px",r<e.left?(v=e.left-l,g.style.left=p+"px"):(v=r-e.right,g.style.left=u+"px"),(v=Math.round(v))<0)return null;g.style.paddingBottom="2px",g.style.width=v+"px",f.innerText=v+"px"}else if(t===m[5]||t===m[6]||t===m[8]||t===m[9]){if(g.style.left="0px",o<e.top?(v=e.top-s,g.style.top=h+"px"):(v=o-e.bottom,g.style.top=e.height+"px"),(v=Math.round(v))<0)return null;f.style.position="absolute",f.style.top="50%",f.style.marginTop="-7px",f.style.left="2px",g.style.height=v+"px",f.innerText=v+"px"}else if(t===m[7]||t===m[12]||t===m[13]){if(g.style.left="0px",o<e.top?(v=e.top-s,g.style.top=c+"px"):(v=o-e.bottom,g.style.top=d+"px"),(v=Math.round(v))<0)return null;f.style.position="absolute",f.style.top="50%",f.style.marginTop="-7px",f.style.left="2px",g.style.height=v+"px",f.innerText=v+"px"}return g},o.prototype.showAlignLine=function(t,e){var i=e.flag,n=e.dragElemRect,o=e.alignElemRect,s=(e.alignDrag,this.option.alignLineSize),r=this.option.alignLineColor,l=o.top,a=o.bottom,h=o.left,p=o.right,c=o.width/2,u=o.height/2,d=n.width/2,g=n.height/2,f={},v=this.alignFlags;i===v[0]||i===v[1]?(f.left=h<n.left?h:n.left,f.top=l,f.bottom=f.top+s,f.right=p>n.right?p:n.right):i===v[2]?(f.top=l+u,f.bottom=f.top+s,h===n.left&&p===n.right?(f.left=h,f.right=p):h>n.left&&p<n.right?(f.left=n.left,f.right=n.right):h<n.left&&p>n.right?(f.left=n.left+d,f.right=p):(f.left=h<n.left?h+c:n.left+d,f.right=p>n.right?p-c:n.right-d)):i===v[3]||i===v[4]?(f.left=h<n.left?h:n.left,f.top=a,f.bottom=f.top+s,f.right=p>n.right?p:n.right):i===v[5]||i===v[6]?(f.left=h,f.top=l<n.top?l:n.top,f.bottom=a>n.bottom?a:n.bottom,f.right=f.left+s):i===v[7]?(f.left=h+c,l===n.top&&a===n.bottom?(f.top=l,f.bottom=a):l>n.top&&a<n.bottom?(f.top=n.top,f.bottom=n.bottom):l<n.top&&a>n.bottom?(f.top=l,f.bottom=n.top+g):(f.top=l<n.top?l+u:n.top+g,f.bottom=a>n.bottom?a-u:n.bottom-g),f.right=f.left+s):i===v[8]||i===v[9]?(f.left=p,f.top=l<n.top?l:n.top,f.bottom=a>n.bottom?a:n.bottom,f.right=f.left+s):i===v[10]||i===v[11]?(f.top=l+u,f.bottom=f.top+s,h===n.left&&p===n.right?(f.left=h,f.right=p):h>n.left&&p<n.right?(f.left=n.left,f.right=n.right):(f.left=h<n.left?h+c:n.left+d,f.right=p>n.right?p:n.right)):i!==v[12]&&i!==v[13]||(f.left=h+c,l===n.top&&a===n.bottom?(f.top=l,f.bottom=a):l>n.top&&a<n.bottom?(f.top=n.top,f.bottom=n.bottom):(f.top=l<n.top?l+u:n.top+g,f.bottom=a>n.bottom?a:n.bottom),f.right=f.left+s);var m=document.createElement("div");m.style.position="absolute",m.style.top=f.top+"px",m.style.left=f.left+"px";var y=f.right-f.left;y=y;var b=f.bottom-f.top;b=b,m.style.width=y+"px",m.style.height=b+"px",m.style.background=r,m.style.zIndex="9999999999999",m.className="align-line";var $=this.createDistText(i,n,o);this.option.isShowDist&&$&&m.appendChild($),t.appendChild(m)},o.prototype.checkAlign=function(){var t=this,e=this.$el,i=this.option.alignDrags,n=this.getClientRect(this.option.alignAnchor?this.option.alignAnchor:e),o=[];this.clearAlignLine();var s=this.alignFlags;i.forEach(function(e){if(e!==t){var i=e.$el,r=t.getClientRect(e.option.alignAnchor?e.option.alignAnchor:i),l=r.top,a=r.height,h=r.bottom,p=r.left,c=r.width,u=r.right,d=n.width/2,g=c/2,f=n.height/2,v=a/2;if(t.isAlign(n.top+f,l+v)){var m={flag:s[2],alignDrag:e,dragValue:l+v-f,alignElemRect:r,dragElemRect:n};o.push(m)}else t.isAlign(n.top,l)?(m={flag:s[0],dragValue:l,alignDrag:e,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.bottom,l)?(m={flag:s[1],alignDrag:e,dragValue:l-n.height,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.bottom,h)?(m={flag:s[3],alignDrag:e,dragValue:h-n.height,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.top,h)?(m={flag:s[4],alignDrag:e,dragValue:h,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.top,l+v)?(m={flag:s[10],alignDrag:e,dragValue:l+v,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.bottom,h-v)&&(m={flag:s[11],alignDrag:e,dragValue:h-v-n.height,alignElemRect:r,dragElemRect:n},o.push(m));t.isAlign(n.left+d,p+g)?(m={flag:s[7],alignDrag:e,dragValue:p+g-d,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.left,p)?(m={flag:s[5],alignDrag:e,dragValue:p,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.right,p)?(m={flag:s[6],alignDrag:e,dragValue:p-n.width,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.right,u)?(m={flag:s[8],alignDrag:e,dragValue:u-n.width,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.left,u)?(m={flag:s[9],alignDrag:e,dragValue:u,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.left,p+g)?(m={flag:s[12],alignDrag:e,dragValue:p+g,alignElemRect:r,dragElemRect:n},o.push(m)):t.isAlign(n.right,u-g)&&(m={flag:s[13],alignDrag:e,dragValue:u-g-n.width,alignElemRect:r,dragElemRect:n},o.push(m))}});var r=this.option.parent||this.$el.offsetParent;o.forEach(function(i){var n=i.flag.split("_")[0];if(t.option.alignAnchor){var o=0;"left"===n?o=t.option.alignAnchor.offsetLeft:"top"===n&&(o=t.option.alignAnchor.offsetTop),e.style[n]=i.dragValue-o+"px"}else e.style[n]=i.dragValue+"px";(t.option.isShowDist||i.alignDrag.option.isShowDist)&&t.showAlignLine(r,i)}),this.onAlign&&0<o.length&&this.onAlign(o)},o);function o(t,e){void 0===e&&(e={}),this.EVENTS=[],this.resizeFlags=["n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize"],this.alignFlags=["top_tt","top_bt","top_cc","top_bb","top_tb","left_ll","left_rl","left_cc","left_rr","left_lr","top_tc","top_bc","left_lc","left_rc"],this.isDrag=!1,this.isResizing=!1,this.$el=t,this.option=e,this.EVENTS=this.isTouch()?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],this.init()}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(4),i(5),i(6);var n=i(1);i(7);var o=i(8),s=i(12);n(function(){var t=new o.default;t.createStage(),new s.default(t)})},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e){Array.prototype.remove=function(t){var e=this.indexOf(t);-1<e&&this.splice(e,1)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(9),o=(s.prototype.createStage=function(){var t=new n.default;t.create(this.$el),this.curStage=t,this.stages.push(t)},s);function s(){this.stages=[],this.curStage=null;var t=$(".stage-ct");this.stages=[],this.$el=t}e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=i(2),s=i(10),r=i(0),l=i(11),a=(h.prototype.create=function(t){var e,i,r,a,h=this,p=new l.default(this),c=p.pageWidth,u=p.pageHeight,d=n('<div class="stage"></div>');t.append(d),e=n('\n      <div class="canvas-wrap">\n        <div>\n          <div class="canvas">\n          </div>\n        </div>\n      </div>\n    '),this.paddingWidth=100*Math.ceil(d.width()/100),this.paddingHeight=100*Math.ceil(d.height()/100),this.isRuler?((a=new s.default).create(d),d.append(e)):(d.append(e),e.css("left",0),e.css("top",0)),i=e.find("> div"),r=e.find(".canvas"),this.$canvas=r,this.$canvasWrap=e,this.$el=d,this.ruler=a,this.$scrollContent=i,this.myScroll=new IScroll(e[0],{scrollX:!0,freeScroll:!0,startX:0,startY:0,probeType:3,scrollbars:!0,mouseWheel:!0,interactiveScrollbars:!0,disableMouse:!0,disablePointer:!0,disableTouch:!0}),this.layoutCanvas(c,u),this.myScroll.on("scroll",function(){a&&(a.setX(this.x),a.setY(this.y))});var g=a.$rulerX[0],f=a.$rulerY[0],v=this.EVENTS;g.addEventListener(v[0],function(t){var e=n('<div class="guide-line guide-lineX"><div></div></div>');h.$el.append(e);var i=new o.default(e[0],{isShowDist:!1,alignAnchor:e[0].children[0],minLeft:20,resizable:!1,allowOverstep:!1});e.css("top",t.clientY-h.$el[0].getBoundingClientRect().top-i.option.alignAnchor.offsetTop+"px"),i.start(t),i.onEnd=function(t){i.$el.offsetTop<=15&&n(i.$el).remove()},h.drags.push(i),h.resetAlignElements()}),f.addEventListener(v[0],function(t){var e=n('<div class="guide-line guide-lineY"><div></div></div>');h.$el.append(e);var i=new o.default(e[0],{isShowDist:!1,alignAnchor:e[0].children[0],minTop:20,resizable:!1,allowOverstep:!1});e.css("left",t.clientX-h.$el[0].getBoundingClientRect().left-i.option.alignAnchor.offsetLeft+"px"),i.start(t),i.onEnd=function(t){i.$el.offsetLeft<=15&&n(i.$el).remove()},h.drags.push(i),h.resetAlignElements()}),this.setupEvent()},h.prototype.layoutCanvas=function(t,e){var i,n,o,s,r,l;o=this.paddingWidth/2,s=this.paddingHeight/2,r=50*Math.ceil(t/50)+this.paddingWidth,l=50*Math.ceil(e/50)+this.paddingHeight,i=r/2-this.$canvasWrap.width()/2,n=l/2-this.$canvasWrap.height()/2,this.ruler.update(t,e,this.paddingWidth,this.paddingHeight),this.ruler&&(this.ruler.setX(-i),this.ruler.setY(-n)),this.$canvas.width(t),this.$canvas.height(e),this.$canvas.css("margin-left",o+"px"),this.$canvas.css("margin-top",s+"px"),this.$scrollContent.width(r),this.$scrollContent.height(l),this.myScroll.scrollTo(-i,-n),this.myScroll.refresh()},h.prototype.setCanvasSize=function(t,e){this.layoutCanvas(t,e)},h.prototype.setupEvent=function(){var t=this,e=this.EVENTS,i=this.$el[0],n=this.$canvas[0];i.addEventListener(e[1],function(e){var i=n.getBoundingClientRect(),o=t.getEventInfo(e),s=o.clientX-i.left,r=o.clientY-i.top;0<=s&&0<=r&&s<t.$canvas.width()&&r<t.$canvas.height()?(t.ruler.setCursorPos(s,r),t.ruler.showCursor()):t.ruler.hideCursor()}),n.addEventListener(e[0],function(i){var o=n.getBoundingClientRect();t.unselectComponent(),console.log("canvas down");var s=t,l=t.getEventInfo(i),a=l.clientX,h=l.clientY,p=new r.default;function c(t){var e,i,n,r,l=(t=s.getEventInfo(t)).clientX,c=t.clientY;n=l<a?a-(e=l):l-(e=a),r=c<h?h-(i=c):c-(i=h),s.setElementPos(p.$el,e-o.left,i-o.top,n,r)}p.setContent('<div class="hot-area-box"></div>'),t.addComponent(p),document.addEventListener(e[1],c),document.addEventListener(e[2],function t(i){(p.width()<p.minWidth||p.height()<p.minHeight)&&s.removeComponent(p),document.removeEventListener(e[1],c),document.removeEventListener(e[2],t)})})},h.prototype.unselectComponent=function(){this.curSelectedComponent&&(this.curSelectedComponent.unselect(),this.curSelectedComponent=null)},h.prototype.selectComponent=function(t){null!=this.curSelectedComponent&&this.curSelectedComponent!=t&&this.curSelectedComponent.unselect(),t.select(),this.curSelectedComponent=t},h.prototype.setElementPos=function(t,e,i,n,o){t.css("left",e+"px"),t.css("top",i+"px"),t.css("width",n+"px"),t.css("height",o+"px")},h.prototype.isTouch=function(){return"ontouchstart"in window},h.prototype.getEventInfo=function(t){return this.isTouch()?t.targetTouches[0]:t},h.prototype.resetAlignElements=function(){var t=this;this.drags.forEach(function(e){e.setAlignDrags(t.drags)})},h.prototype.removeComponent=function(t){t.remove(),this.drags.remove(t.drag)},h.prototype.addComponent=function(t){t.mount(this),this.drags.push(t.drag),this.resetAlignElements()},h);function h(){this.EVENTS=[],this.isRuler=!0,this.drags=[],this.curSelectedComponent=null,this.EVENTS=this.isTouch()?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"]}e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(o.prototype.create=function(t){var e=$('\n      <div class="ruler">\n        <div class="rulerX">\n          <div>\n            <div class="cursor-pos"><span>0</span></div>\n          </div>\n        </div>\n        <div class="rulerY">\n          <div>\n            <div class="cursor-pos"><span>0</span></div>\n          </div>\n        </div>\n      </div>\n    '),i=e.find(".rulerX > div"),n=e.find(".rulerY > div");this.$el=e,this.$rulerX=i,this.$rulerY=n,this.$cursorPosX=i.find(".cursor-pos"),this.$cursorPosY=n.find(".cursor-pos"),t.append(this.$el)},o.prototype.draw=function(){var t=this.canvasWidth,e=this.canvasHeight,i=this.paddingWidth,n=this.paddingHeight,o=50*Math.ceil(t/50)+i,s=50*Math.ceil(e/50)+n;this.paddingHeight=n,this.paddingWidth=i,this.width=o,this.height=s;for(var r=-i/2,l="",a=0;a<o/50;a++)l+="<span>"+Math.abs(r+50*a)+"</span>";var h=-n/2,p="";for(a=0;a<s/50;a++)p+="<span>"+Math.abs(h+50*a)+"</span>";this.$rulerX.append(l),this.$rulerX.width(o),this.$rulerY.append(p),this.$rulerY.height(s)},o.prototype.update=function(t,e,i,n){this.canvasWidth=t,this.canvasHeight=e,this.paddingWidth=i,this.paddingHeight=n,this.$rulerX.find("> span").remove(),this.$rulerY.find("> span").remove(),this.draw()},o.prototype.showCursor=function(){this.$cursorPosX.show(),this.$cursorPosY.show()},o.prototype.hideCursor=function(){this.$cursorPosX.hide(),this.$cursorPosY.hide()},o.prototype.setCursorPos=function(t,e){this.$cursorPosX.css("left",this.paddingWidth/2+t+"px"),this.$cursorPosY.css("top",this.paddingHeight/2+e+"px"),this.$cursorPosX.find("span").text(Math.ceil(t)),this.$cursorPosY.find("span").text(Math.ceil(e))},o.prototype.setX=function(t){this.$rulerX.css("left",t+"px")},o.prototype.setY=function(t){this.$rulerY.css("top",t+"px")},o);function o(){}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this.stage=t;var e=$(".page-config"),i=e.find(".input-width"),n=e.find(".input-height"),o=e.find(".input-bg"),s=(e.find(".calc-width"),e.find(".calc-height"),e.find(".align-select"));this.pageWidth=1e3,this.pageHeight=600,i.val(this.pageWidth),n.val(this.pageHeight),$(document).spectrum({showPalette:!0,maxSelectionSize:18,showInitial:!0,preferredFormat:"hex",showButtons:!1,palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"]],move:function(t){}}).spectrum.freshSpan();var r=this;i.change(function(){r.pageWidth=+$(this).val(),t.setCanvasSize(r.pageWidth,r.pageHeight)}),n.change(function(){r.pageHeight=+$(this).val(),t.setCanvasSize(r.pageWidth,r.pageHeight)}),o.change(function(){t.$canvas.css("background-image",'url("'+$(this).val()+'")')}),s.change(function(){t.$canvas.css("background-position",$(this).val())})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(13),o=i(14);e.default=function(t){this.stageCt=t;var e=$(".component-list");(this.$el=e).find("li").bind("mousedown",function(e){var i=$(this).data("name"),s=null;"img-component"===i?s=new n.default:"text-component"===i&&(s=new o.default),t.curStage.addComponent(s),t.curStage.selectComponent(s)})}},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s,r=i(0),l=(o(a,s=r.default),a);function a(){var t=s.call(this,"img-component")||this;return t.$contentBox.append("\n        <a></a>\n      "),t}e.default=l},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s,r=i(0),l=(o(a,s=r.default),a);function a(){var t=s.call(this,"text-component")||this;return t.$contentBox.append("\n        <a>请双击设置文件内容</a>\n      "),t}e.default=l}]);
//# sourceMappingURL=index.bundle.js.map