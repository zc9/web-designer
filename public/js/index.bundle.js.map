{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Component.ts","webpack:///./src/Draggable.ts","webpack:///./src/index.ts","webpack:///./src/common.js","webpack:///./src/StageContainer.ts","webpack:///./src/Stage.ts","webpack:///./src/Ruler.ts","webpack:///./src/HotAreaComponent.ts","webpack:///./src/ComponentBar.ts","webpack:///./src/ImgComponent.ts","webpack:///./src/TextComponent.ts","webpack:///./src/Header.ts","webpack:///./src/PageConfig.ts","webpack:///./src/ToolBar.ts","webpack:///./src/ToolConfig.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","width","this","drag","$el","offsetWidth","height","offsetHeight","setContent","content","$contentBox","append","remove","select","addClass","selected","resetPositionInfo","showToolbar","$topBar","show","$bottomBar","left","style","top","$inputX","val","parseInt","$inputY","$inputWidth","$inputHeight","unselect","hide","removeClass","mount","stage","id","getRandomStr","$canvas","resizable","classes","handles","minWidth","minHeight","handle","snap","onDrag","onResize","on","event","curSelectedComponent","selectComponent","find","stopPropagation","removeComponent","props","formData","$","init","opt","document","querySelector","position","classArr","dragRef","className","split","push","join","option","containment","axis","snapAnchor","snapLineColor","snapTolerance","resizeTolerance","cursor","snapLine","snapDist","minLeft","minTop","setupEvent","prop","offsetParent","isTouch","window","cancelBubble","getEventInfo","targetTouches","checkResize","elem","x","y","rect","getBoundingClientRect","resizeFlags","right","bottom","darg","windowWidth","windowHeight","_this","EVENTS","diffX","diffY","elemWidth","elemHeight","parentWidth","parentHeight","eventInfo","move","clientX","clientY","doSnap","isDragging","offsetLeft","offsetTop","documentElement","clientWidth","clientHeight","addEventListener","end","removeEventListener","onStop","clearSnapLine","resize","that","startX","startY","originHeight","originWidth","getStyle","originTop","originLeft","isResizing","resizeN","resizeE","resizeS","resizeW","resizeFlag","start","preventDefault","onStart","disabled","el","styleProp","getComputedStyle","defaultView","getPropertyValue","currentStyle","getClientRect","elemRect","$parent","clientRect","leftBorderWidth","topBorderWidth","parentRect","isSnap","srcValue","destValue","Math","abs","Array","apply","querySelectorAll","forEach","item","removeChild","createDistText","flag","dragElemRect","snapElemRect","itemWidthHalf","itemHeightHalf","dragWidthHalf","dragHeightHalf","textBox","createElement","textAlign","text","distance","background","borderRadius","lineHeight","padding","fontSize","color","userSelect","appendChild","snapFlags","round","paddingBottom","innerText","marginTop","showSnapLine","snapLineSize","snapDrag","lineRect","line","lineWidth","zIndex","distText","dragElem","snapElems","slice","length","snapInfos","itemElem","snapInfo","dragValue","pos","onSnap","pageConfig","stageCt","createStage","index","indexOf","splice","curStage","stages","setStage","$stageCt","$canvasWrap","$scrollContent","ruler","canvasWidth","pageWidth","canvasHeight","pageHeight","paddingWidth","ceil","paddingHeight","isRuler","css","$canvasBox","myScroll","IScroll","scrollX","freeScroll","probeType","scrollbars","mouseWheel","interactiveScrollbars","disableMouse","disablePointer","disableTouch","layoutCanvas","setX","setY","$rulerX","$rulerY","$guideLine","children","selector","selectable","setState","Stage","STATE","marginLeft","scrollContentWidth","scrollContentHeight","update","scrollTo","refresh","setCanvasSize","stageElem","canvasElem","canvasRect","setCursorPos","showCursor","hideCursor","target","state","unselectComponent","component","addComponent","curStartX","curStartY","setElementPos","$elem","components","setComponentAllowOverstep","allowOverstep","generateJsonCode","app","getProps","JSON","stringify","generateHtmlCode","appsHtml","toHtml","bgColor","len","charArr","chars","floor","random","drags","overflow","$ct","$cursorPosX","$cursorPosY","draw","rulerWidth","rulerHeight","initXValue","ruleXSpans","initYValue","ruleYSpans","data","initX","initY","max","img","bgImg","imgMode","$img","outerHTML","href","hrefMode","initFormData","appLabel","linkMode","tipText","animType","bgImgSize","animSpeed","animRange","wangID","$content","attr","onLinkModeChanged","$layerElem","$wangIDInputBox","$hrefInputBox","openEditDialog","layer","layui","layerNo","open","type","title","skin","area","success","layerElem","close","form","render","console","log","field","is","config","appID","w","h","dblclick","openExportDialog","$jsonTextArea","$htmlTextArea","previewWin","url","location","write","focus","$inputBg","$alignSelect","$allowOverstep","spectrum","showPalette","maxSelectionSize","showInitial","preferredFormat","showButtons","palette","$input","colorHex","toHexString","freshSpan","change","alignValue","hasClass","$this","repeat","attachment","$settingBar","$pageConfig","$curSetting","$curItem","$curItemOfGroup1","draggable","$icon","$setting","ToolConfig"],"mappings":"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","file":"js/index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import Draggable from './Draggable';\nimport Stage from './Stage';\nexport default abstract class Component {\n  $contentBox: JQuery\n  $el: JQuery\n  $topBar: JQuery\n  $bottomBar: JQuery\n  minWidth: number\n  minHeight: number\n  $inputX: JQuery\n  $inputY: JQuery\n  $inputWidth: JQuery\n  $inputHeight: JQuery\n  drag: Draggable\n  stage: Stage\n  props: any = {}\n  formData: any = {}\n  name: string\n  id: string\n  selected: boolean = false\n  constructor(name = '') {\n    this.name = name;\n    let $el = $(`\n      <div class=\"component-box\">\n        <div class=\"top-bar\">\n          <span class=\"setting\" title=\"编辑\"></span>\n          <span class=\"lock\"></span>\n          <span class=\"delete\"></span>\n        </div>\n        <div class=\"content-box\">\n        </div>\n        <div class=\"bottom-bar\">\n          <span>X:<input type=\"text\" value=\"0\"></span>\n          <span>Y:<input type=\"text\" value=\"0\"></span>\n          <span>宽:<input type=\"text\" value=\"0\"></span>\n          <span>高:<input type=\"text\" value=\"0\"></span>\n          <span class=\"confirm\">确定</span>\n        </div>\n      </div>\n    `);\n    this.$contentBox = $el.find('.content-box');\n    if (name) {\n      $el.addClass(name)\n    }\n    this.$el = $el;\n    this.$topBar = $el.find('.top-bar');\n    this.$bottomBar = $el.find('.bottom-bar');\n    this.minWidth = 24;\n    this.minHeight = 24;\n\n    this.$inputX = this.$bottomBar.find('span:nth-child(1) input');\n    this.$inputY = this.$bottomBar.find('span:nth-child(2) input');\n    this.$inputWidth = this.$bottomBar.find('span:nth-child(3) input');\n    this.$inputHeight = this.$bottomBar.find('span:nth-child(4) input');\n\n  }\n\n  width() {\n    return this.drag.$el.offsetWidth;\n  }\n\n  height() {\n    return this.drag.$el.offsetHeight;\n  }\n\n  setContent(content) {\n    this.$contentBox.append(content)\n  }\n\n  remove() {\n    this.$el.remove();\n  }\n\n  abstract getProps() : object;\n  abstract toHtml() : string;\n\n  select() {\n    this.$contentBox.addClass('selected');\n    this.selected = true\n    this.resetPositionInfo();\n  }\n\n  showToolbar() {\n    this.$topBar.show();\n    this.$bottomBar.show();\n  }\n\n  resetPositionInfo() {\n    let left = this.drag.$el.style.left;\n    let top = this.drag.$el.style.top;\n    this.$inputX.val(parseInt(left ? left : 0));\n    this.$inputY.val(parseInt(top ? top : 0));\n    this.$inputWidth.val(this.width());\n    this.$inputHeight.val(this.height());\n  }\n\n  unselect() {\n    this.$topBar.hide();\n    this.$bottomBar.hide();\n    this.$contentBox.removeClass('selected')\n    this.selected = false\n  }\n\n  mount(stage: Stage) {\n    this.stage = stage;\n    this.id = stage.getRandomStr(4)\n    let $canvas = stage.$canvas;\n    $canvas.append(this.$el)\n    // @ts-ignore\n    this.$el.resizable({\n      // containment: $canvas[0],\n      classes: {\n        'ui-resizable-se': '',\n      },\n      handles: 'all',\n    })\n    let drag = new Draggable(this.$el[0], {\n      minWidth: this.minWidth,\n      minHeight: this.minHeight,\n      handle: this.$contentBox[0],\n      // containment: $canvas[0],\n      resizable: false,\n      snap: true\n    })\n    this.drag = drag;\n    drag.onDrag = () => {\n      this.resetPositionInfo();\n    }\n    drag.onResize = () => {\n      this.resetPositionInfo();\n    }\n    this.$contentBox.on('mousedown',  (event) => {\n      if (stage.curSelectedComponent != this) {\n        stage.selectComponent(this);\n        this.showToolbar()\n      }\n    });\n\n    this.$topBar.find('.delete').on('mousedown', (event) => {\n      event.stopPropagation();\n      stage.removeComponent(this)\n    })\n\n    this.$topBar.on('mousedown', (event) => {\n      event.stopPropagation();\n    })\n    this.$bottomBar.on('mousedown', (event) => {\n      event.stopPropagation();\n    })\n\n    this.$el.on('mouseenter', (event) => {\n      if (this.selected) {\n        this.showToolbar()\n      }\n    })\n\n    // this.$el.on('mouseleave', (event) => {\n    //   if (this.selected) {\n    //     this.$topBar.hide();\n    //     this.$bottomBar.hide();\n    //   }\n    // })\n  }\n\n}\n","export default class Draggable {\n  EVENTS: Array<string> = []\n  resizeFlags = [\n    'n-resize', 'e-resize', 's-resize', 'w-resize',\n    'ne-resize', 'nw-resize', 'se-resize', 'sw-resize'\n  ]\n  snapFlags = [\n    'top_tt', 'top_bt', 'top_cc','top_bb', 'top_tb',\n    'left_ll', 'left_rl', 'left_cc', 'left_rr', 'left_lr',\n    'top_tc', 'top_bc', 'left_lc', 'left_rc'\n  ]\n  resizeFlag: string\n  $el: any\n  isDragging: boolean = false\n  onStart: Function\n  onStop: Function\n  onResize: Function\n  onSnap: Function\n  onDrag: Function\n  isResizing: boolean = false\n  cursor: string = 'move'\n  containment: any = null\n  disabled: boolean = false\n  handle: any = null\n  snapTolerance: number = 10\n  snap: any = false\n  snapLineColor: string = '#FF4AFF'\n  snapLineSize: number = 1\n  snapAnchor: any = null\n  snapLine: boolean = true\n  snapDist: boolean = true\n  axis: any = false\n  minLeft: number = 0\n  minTop: number = 0\n  resizable: boolean = false\n  resizeTolerance: number = 5\n  minWidth: number = 24\n  minHeight: number = 24\n\n  constructor(el: any, opt = {}) {\n    this.$el = el\n    this.EVENTS = this.isTouch() ?\n      ['touchstart', 'touchmove', 'touchend'] : ['mousedown', 'mousemove', 'mouseup']\n    this.init(opt)\n  }\n\n  init(opt) {\n    if (typeof this.$el === 'string') {\n      this.$el = document.querySelector(this.$el)\n    }\n    this.$el.style.position = 'absolute'\n    this.$el.dragRef = this\n    let classArr = this.$el.className.split(' ');\n    classArr.push('draggable')\n    this.$el.className = classArr.join(' ')\n\n    this.option('containment', opt.containment)\n    this.option('handle', opt.handle)\n    this.option('snap', opt.snap)\n    this.option('axis', opt.axis)\n    this.option('snapAnchor', opt.snapAnchor)\n    this.option('snapLineColor', opt.snapLineColor)\n    this.option('snapTolerance', opt.snapTolerance)\n    this.option('resizeTolerance', opt.resizeTolerance)\n    this.option('cursor', opt.cursor)\n    this.option('snapLine', opt.snapLine)\n    this.option('snapDist', opt.snapDist)\n    this.option('resizable', opt.resizable)\n    this.option('minWidth', opt.minWidth)\n    this.option('minHeight', opt.minHeight)\n    this.option('minLeft', opt.minLeft)\n    this.option('minTop', opt.minTop)\n\n    this.setupEvent()\n  }\n\n  option(prop: string, val: any) {\n    if (prop === 'containment') {\n      if (typeof val !== 'undefined') {\n        if (val === 'parent') {\n          this.containment = this.$el.offsetParent\n        } else {\n          this.containment = val\n        }\n      }\n    } else if (prop === 'handle') {\n      if (typeof val === 'undefined') {\n        this.handle = this.$el\n      } else {\n        if (typeof val === 'string') {\n          this.handle = document.querySelector(val)\n        } else {\n          this.handle = val\n        }\n      }\n    } else {\n      if (typeof val !== 'undefined') {\n        this[prop] = val\n      }\n    }\n  }\n\n  isTouch() {\n    return 'ontouchstart' in window\n  }\n\n  stopPropagation(event) {\n    window.event? window.event.cancelBubble = true : event.stopPropagation()\n  }\n\n  getEventInfo(event) {\n    return this.isTouch() ? event.targetTouches[0] : event\n  }\n\n  checkResize(elem, x, y) {\n    let rect = elem.getBoundingClientRect()\n    let resizeTolerance = this.resizeTolerance\n    let resizeFlags = this.resizeFlags\n    if ((x >= rect.right - resizeTolerance && x <= rect.right) &&\n      (y >= rect.top && y <= rect.top + resizeTolerance)) {\n      return resizeFlags[4]\n    }\n    else if ((x >= rect.left && x <= rect.left + resizeTolerance) &&\n      (y >= rect.top && y <= rect.top + resizeTolerance)) {\n      return resizeFlags[5]\n    }\n    else if ((x >= rect.right - resizeTolerance && x <= rect.right) &&\n      (y >= rect.bottom - resizeTolerance && y <= rect.bottom)) {\n      return resizeFlags[6]\n    }\n    else if ((x >= rect.left && x <= rect.left + resizeTolerance) &&\n      (y >= rect.bottom - resizeTolerance && y <= rect.bottom)) {\n      return resizeFlags[7]\n    }\n    else if (y >= rect.top && y <= rect.top + resizeTolerance) {\n      return resizeFlags[0]\n    }\n    else if (x >= rect.right - resizeTolerance && x <= rect.right) {\n      return resizeFlags[1]\n    }\n    else if (y >= rect.bottom - resizeTolerance && y <= rect.bottom) {\n      return resizeFlags[2]\n    }\n    else if (x >= rect.left && x <= rect.left + resizeTolerance) {\n      return resizeFlags[3]\n    }\n    return null\n  }\n\n  darg(event) {\n    let _this = this\n    const EVENTS = this.EVENTS\n    let diffX = 0, diffY = 0\n    let elemWidth = 0, elemHeight = 0\n    let windowWidth = 0, windowHeight = 0, parentWidth = 0, parentHeight = 0\n    let eventInfo = _this.getEventInfo(event)\n    _this.isDragging = true\n    diffX = eventInfo.clientX - _this.$el.offsetLeft\n    diffY = eventInfo.clientY - _this.$el.offsetTop\n    elemWidth = _this.$el.offsetWidth\n    elemHeight = _this.$el.offsetHeight\n    windowWidth = document.documentElement.clientWidth\n    windowHeight = document.documentElement.clientHeight\n    parentWidth = this.containment ? this.containment.clientWidth : windowWidth\n    parentHeight = this.containment ? this.containment.clientHeight : windowHeight\n    document.addEventListener(EVENTS[1], move)\n    document.addEventListener(EVENTS[2], end)\n    function move(event) {\n      let eventInfo = _this.getEventInfo(event)\n      let left = eventInfo.clientX - diffX\n      let top = eventInfo.clientY - diffY\n      let minLeft = _this.minLeft\n      let minTop = _this.minTop\n      if (_this.containment) {\n        if (left < minLeft) {\n          left = minLeft\n        }\n        if (top < minTop) {\n          top = minTop\n        }\n        if (left + elemWidth > parentWidth) {\n          left = parentWidth - elemWidth\n        }\n        if (top + elemHeight > parentHeight) {\n          top = parentHeight - elemHeight\n        }\n      }\n\n      if (_this.axis !== 'y') {\n        _this.$el.style.left = `${left}px`\n      }\n\n      if (_this.axis !== 'x') {\n        _this.$el.style.top = `${top}px`\n      }\n\n      if (_this.snap) {\n        _this.doSnap()\n      }\n      if (_this.onDrag) _this.onDrag(eventInfo)\n    }\n    function end(event) {\n      let eventInfo = _this.getEventInfo(event)\n      _this.isDragging = false\n      document.removeEventListener(EVENTS[1], move)\n      document.removeEventListener(EVENTS[2], end)\n      if (_this.onStop) _this.onStop(eventInfo)\n      _this.clearSnapLine()\n    }\n  }\n\n  resize(event) {\n    const EVENTS = this.EVENTS\n    let that = this\n    event = this.getEventInfo(event)\n    let startX = event.clientX\n    let startY = event.clientY\n    let height = this.$el.offsetHeight\n    let width = this.$el.offsetWidth\n    let originHeight = height, originWidth = width\n    let top = parseInt(this.getStyle(this.$el, 'top'))\n    let left = parseInt(this.getStyle(this.$el, 'left'))\n    let originTop = top\n    let originLeft = left\n    this.isResizing = true\n    let windowWidth = document.documentElement.clientWidth\n    let windowHeight = document.documentElement.clientHeight\n    let parentWidth = this.containment ? this.containment.clientWidth : windowWidth\n    let parentHeight = this.containment ? this.containment.clientHeight : windowHeight\n    let minWidth = this.minWidth\n    let minHeight = this.minHeight\n    function resizeN(event) {\n      let d = event.clientY - startY\n      height -= d\n      if (height < minHeight) {\n        height = minHeight\n      }\n      if (height > originTop + originHeight) {\n        height = originTop + originHeight\n      }\n      top += d\n      if (top < 0) {\n        top = 0\n      }\n      if(top > originTop + (originHeight - minHeight)) {\n        top = originTop + (originHeight - minHeight)\n      }\n      that.$el.style.top = top + 'px'\n      that.$el.style.height = height + 'px'\n    }\n\n    function resizeE(event) {\n      width += event.clientX - startX\n      if (width < minWidth) {\n        width = minWidth\n      }\n      if (width > parentWidth - originLeft) {\n        width = parentWidth - originLeft\n      }\n      that.$el.style.width = width + 'px'\n    }\n    function resizeS(event) {\n      height += event.clientY - startY\n      if (height < minHeight) {\n        height = minHeight\n      }\n      if (height > parentHeight - originTop) {\n        height = parentHeight - originTop\n      }\n      that.$el.style.height = height + 'px'\n    }\n    function resizeW(event) {\n      width -= event.clientX - startX\n      if (width < minWidth) {\n        width = minWidth\n      }\n      if (width > originLeft + originWidth) {\n        width = originLeft + originWidth\n      }\n      left += event.clientX - startX\n      if (left < 0) {\n        left = 0\n      }\n      if(left > originLeft + (originWidth - minWidth)) {\n        left = originLeft + (originWidth - minWidth)\n      }\n      that.$el.style.left = left + 'px'\n      that.$el.style.width = width + 'px'\n    }\n\n    function move(event) {\n      event = that.getEventInfo(event)\n      if (that.resizeFlag === that.resizeFlags[0]) {\n        resizeN(event)\n      }\n      else if (that.resizeFlag === that.resizeFlags[1]) {\n        resizeE(event)\n      }\n      else if (that.resizeFlag === that.resizeFlags[2]) {\n        resizeS(event)\n      }\n      else if (that.resizeFlag === that.resizeFlags[3]) {\n        resizeW(event)\n      }\n      else if (that.resizeFlag === that.resizeFlags[4]) {\n        resizeN(event)\n        resizeE(event)\n      }\n      else if (that.resizeFlag === that.resizeFlags[5]) {\n        resizeN(event)\n        resizeW(event)\n      }\n      else if (that.resizeFlag === that.resizeFlags[6]) {\n        resizeS(event)\n        resizeE(event)\n      }\n      else if (that.resizeFlag === that.resizeFlags[7]) {\n        resizeS(event)\n        resizeW(event)\n      }\n      startY = event.clientY\n      startX = event.clientX\n      if (that.onResize) {\n        that.onResize()\n      }\n    }\n    function end(event) {\n      that.isResizing = false\n      document.removeEventListener(EVENTS[1], move)\n      document.removeEventListener(EVENTS[2], end)\n    }\n\n    document.addEventListener(EVENTS[1], move)\n    document.addEventListener(EVENTS[2], end)\n  }\n\n  start(event) {\n    event.preventDefault()\n    this.stopPropagation(event)\n    if (this.onStart) this.onStart(event)\n    if (this.resizable && this.resizeFlag) {\n      this.resize(event)\n    } else {\n      this.darg(event)\n    }\n  }\n\n  setupEvent() {\n    let EVENTS = this.EVENTS\n    let _this = this\n    let handle = this.handle\n    if (this.resizable) {\n      handle.addEventListener(EVENTS[1], event => {\n        if (!this.isResizing) {\n          let eventInfo = _this.getEventInfo(event)\n          let resizeFlag = _this.checkResize(handle, eventInfo.clientX, eventInfo.clientY)\n          this.resizeFlag = resizeFlag\n          if (this.resizable && resizeFlag) {\n            handle.style.cursor = resizeFlag\n          } else {\n            handle.style.cursor = this.cursor\n          }\n        }\n      })\n    }\n    if (!this.disabled) {\n      handle.style.cursor = this.cursor\n      handle.addEventListener(EVENTS[0], this.start.bind(this))\n    }\n  }\n\n  getStyle(el, styleProp) {\n    if(window.getComputedStyle) {\n      return document.defaultView.getComputedStyle(el, null).getPropertyValue(styleProp)\n    }\n    if (el.currentStyle) {\n      return el.currentStyle[styleProp]\n    }\n    return null\n  }\n\n  getClientRect(el) {\n    let elemRect = el.getBoundingClientRect()\n    let $parent = this.containment ? this.containment : this.$el.offsetParent\n    let clientRect: any = {}\n    let leftBorderWidth = parseInt(this.getStyle($parent, 'border-left-width'))\n    let topBorderWidth = parseInt(this.getStyle($parent, 'border-top-width'))\n    let parentRect: any = $parent.getBoundingClientRect();\n    clientRect.left = elemRect.left - parentRect.left - leftBorderWidth;\n    clientRect.top = elemRect.top - parentRect.top - topBorderWidth;\n    clientRect.right = clientRect.left + elemRect.width;\n    clientRect.bottom = clientRect.top + elemRect.height;\n    clientRect.width = elemRect.width;\n    clientRect.height = elemRect.height;\n    return clientRect\n  }\n\n  isSnap(srcValue, destValue) {\n    let snapTolerance = this.snapTolerance\n    return Math.abs(srcValue - destValue) <= snapTolerance\n  }\n\n  clearSnapLine() {\n    let lines = Array.apply(null, document.querySelectorAll('.snap-line'))\n    lines.forEach(item => {\n      item.offsetParent.removeChild(item)\n    })\n  }\n\n\n  createDistText(flag, dragElemRect, snapElemRect) {\n    let { top, bottom, left, right, width, height } = snapElemRect\n    let itemWidthHalf = width / 2\n    let itemHeightHalf = height / 2\n    let dragWidthHalf = dragElemRect.width / 2\n    let dragHeightHalf = dragElemRect.height / 2\n\n    let textBox = document.createElement('div')\n    textBox.style.position = 'absolute'\n    // textBox.style.background = '#000000'\n    textBox.style.textAlign = 'center'\n\n    let text = document.createElement('span')\n    let distance = 0\n    let textHeight = 14\n    text.style.background = this.snapLineColor\n    text.style.borderRadius = '2px'\n    text.style.lineHeight = '14px'\n    text.style.padding = '0 2px'\n    text.style.fontSize = '10px'\n    text.style.color = '#ffffff'\n    text.style.userSelect='none'\n    textBox.appendChild(text)\n    let snapFlags = this.snapFlags\n    //'top_tt', 'top_bt','top_bb', 'top_tb',\n    if (flag === snapFlags[0] || flag === snapFlags[1] ||\n      flag === snapFlags[3] || flag === snapFlags[4]) {\n      textBox.style.bottom = '0px'\n      if (left < dragElemRect.left) {\n        distance = dragElemRect.left - right\n        textBox.style.left = width + 'px'\n      } else {\n        distance = left - dragElemRect.right\n        textBox.style.left = dragElemRect.width + 'px'\n      }\n      distance = Math.round(distance)\n      if (distance < 0) return null\n      textBox.style.width = distance + 'px'\n      textBox.style.paddingBottom = '2px'\n      text.innerText = distance + 'px'\n    }\n    // 'top_cc' 'top_tc' 'top_bc'\n    else if (flag === snapFlags[2] || flag === snapFlags[10] || flag === snapFlags[11]) {\n      textBox.style.bottom = '0px'\n      if (left < dragElemRect.left) {\n        distance = dragElemRect.left - right\n        textBox.style.left = itemWidthHalf + 'px'\n      } else {\n        distance = left - dragElemRect.right\n        textBox.style.left = dragWidthHalf + 'px'\n      }\n      distance = Math.round(distance)\n      if (distance < 0) return null\n      textBox.style.paddingBottom = '2px'\n      textBox.style.width = distance + 'px'\n      text.innerText = distance + 'px'\n    }\n\n    else if (flag === snapFlags[5] || flag === snapFlags[6] ||\n      flag === snapFlags[8] || flag === snapFlags[9]) {\n      textBox.style.left = '0px'\n      if (top < dragElemRect.top) {\n        distance = dragElemRect.top - bottom\n        textBox.style.top = height + 'px'\n      } else {\n        distance = top - dragElemRect.bottom\n        textBox.style.top = dragElemRect.height + 'px'\n      }\n      distance = Math.round(distance)\n      if (distance < 0) return null\n      text.style.position = 'absolute'\n      text.style.top = '50%'\n      text.style.marginTop = -(textHeight / 2) + 'px'\n      text.style.left = '2px'\n      textBox.style.height = distance + 'px'\n      text.innerText = distance + 'px'\n    }\n    //'left_cc' 'left_lc' 'top_rc'\n    else if (flag === snapFlags[7] || flag === snapFlags[12] || flag === snapFlags[13]) {\n      textBox.style.left = '0px'\n      if (top < dragElemRect.top) {\n        distance = dragElemRect.top - bottom\n        textBox.style.top = itemHeightHalf + 'px'\n      } else {\n        distance = top - dragElemRect.bottom\n        textBox.style.top = dragHeightHalf + 'px'\n      }\n      distance = Math.round(distance)\n      if (distance < 0) return null\n      text.style.position = 'absolute'\n      text.style.top = '50%'\n      text.style.marginTop = -(textHeight / 2) + 'px'\n      text.style.left = '2px'\n      textBox.style.height = distance + 'px'\n      text.innerText = distance + 'px'\n    }\n\n    return textBox\n\n  }\n\n  showSnapLine($parent, { flag, dragElemRect, snapElemRect, snapDrag }) {\n    let snapLineSize = this.snapLineSize\n    let snapLineColor = this.snapLineColor\n    let { top, bottom, left, right, width, height } = snapElemRect\n    let itemWidthHalf = width / 2\n    let itemHeightHalf = height / 2\n    let dragWidthHalf = dragElemRect.width / 2\n    let dragHeightHalf = dragElemRect.height / 2\n    let lineRect: any = {}\n\n    let snapFlags = this.snapFlags\n    if (flag === snapFlags[0] || flag === snapFlags[1]) {\n      lineRect.left = left < dragElemRect.left ? left : dragElemRect.left\n      lineRect.top = top\n      lineRect.bottom = lineRect.top + snapLineSize\n      lineRect.right = right > dragElemRect.right ? right : dragElemRect.right\n\n    } else if (flag === snapFlags[2]) {\n      lineRect.top = top + itemHeightHalf\n      lineRect.bottom = lineRect.top + snapLineSize\n      if (left === dragElemRect.left && right === dragElemRect.right) {\n        lineRect.left = left\n        lineRect.right = right\n      } else if (left > dragElemRect.left && right < dragElemRect.right) {\n        lineRect.left = dragElemRect.left\n        lineRect.right = dragElemRect.right\n      } else if (left < dragElemRect.left && right > dragElemRect.right) {\n        lineRect.left = dragElemRect.left + dragWidthHalf\n        lineRect.right = right\n      } else {\n        lineRect.left = left < dragElemRect.left ? left + itemWidthHalf : dragElemRect.left + dragWidthHalf\n        lineRect.right = right > dragElemRect.right ? right - itemWidthHalf : dragElemRect.right - dragWidthHalf\n      }\n\n    } else if (flag === snapFlags[3] || flag === snapFlags[4]) {\n      lineRect.left = left < dragElemRect.left ? left : dragElemRect.left\n      lineRect.top = bottom\n      lineRect.bottom = lineRect.top + snapLineSize\n      lineRect.right = right > dragElemRect.right ? right : dragElemRect.right\n    } else if (flag === snapFlags[5] || flag === snapFlags[6]) {\n      lineRect.left = left\n      lineRect.top = top < dragElemRect.top ? top : dragElemRect.top\n      lineRect.bottom = bottom > dragElemRect.bottom ? bottom : dragElemRect.bottom\n      lineRect.right = lineRect.left + snapLineSize\n    } else if (flag === snapFlags[7]) {\n      lineRect.left = left + itemWidthHalf\n      if (top === dragElemRect.top && bottom === dragElemRect.bottom) {\n        lineRect.top = top\n        lineRect.bottom = bottom\n      } else if (top > dragElemRect.top && bottom < dragElemRect.bottom) {\n        lineRect.top = dragElemRect.top\n        lineRect.bottom = dragElemRect.bottom\n      } else if (top < dragElemRect.top && bottom > dragElemRect.bottom) {\n        lineRect.top = top\n        lineRect.bottom = dragElemRect.top + dragHeightHalf\n      } else {\n        lineRect.top = top < dragElemRect.top ? top + itemHeightHalf : dragElemRect.top + dragHeightHalf\n        lineRect.bottom = bottom > dragElemRect.bottom ? bottom - itemHeightHalf : dragElemRect.bottom - dragHeightHalf\n      }\n      lineRect.right = lineRect.left + snapLineSize\n    } else if (flag === snapFlags[8] || flag === snapFlags[9]) {\n      lineRect.left = right\n      lineRect.top = top < dragElemRect.top ? top : dragElemRect.top\n      lineRect.bottom = bottom > dragElemRect.bottom ? bottom : dragElemRect.bottom\n      lineRect.right = lineRect.left + snapLineSize\n    }\n\n    else if (flag === snapFlags[10] || flag === snapFlags[11]) {\n      lineRect.top = top + itemHeightHalf\n      lineRect.bottom = lineRect.top + snapLineSize\n      if (left === dragElemRect.left && right === dragElemRect.right) {\n        lineRect.left = left\n        lineRect.right = right\n      } else if (left > dragElemRect.left && right < dragElemRect.right) {\n        lineRect.left = dragElemRect.left\n        lineRect.right = dragElemRect.right\n      } else {\n        lineRect.left = left < dragElemRect.left ? left + itemWidthHalf : dragElemRect.left + dragWidthHalf\n        lineRect.right = right > dragElemRect.right ? right : dragElemRect.right\n      }\n    }\n\n    else if (flag === snapFlags[12] || flag === snapFlags[13]) {\n      lineRect.left = left + itemWidthHalf\n      if (top === dragElemRect.top && bottom === dragElemRect.bottom) {\n        lineRect.top = top\n        lineRect.bottom = bottom\n      } else if (top > dragElemRect.top && bottom < dragElemRect.bottom) {\n        lineRect.top = dragElemRect.top\n        lineRect.bottom = dragElemRect.bottom\n      } else {\n        lineRect.top = top < dragElemRect.top ? top + itemHeightHalf : dragElemRect.top + dragHeightHalf\n        lineRect.bottom = bottom > dragElemRect.bottom ? bottom : dragElemRect.bottom\n      }\n      lineRect.right = lineRect.left + snapLineSize\n    }\n\n    let line = document.createElement('div')\n    line.style.position = 'absolute'\n    line.style.top = `${lineRect.top}px`\n    line.style.left = `${lineRect.left}px`\n    let lineWidth = lineRect.right - lineRect.left\n    lineWidth = lineWidth === 1 ? lineWidth : lineWidth\n    let lineHeight = lineRect.bottom - lineRect.top\n    lineHeight = lineHeight === 1 ? lineHeight : lineHeight\n    line.style.width = `${lineWidth}px`\n    line.style.height = `${lineHeight}px`\n    line.style.background =  snapLineColor\n    line.style.zIndex = '9999999999999'\n    line.className = 'snap-line'\n    let distText = this.createDistText(flag, dragElemRect, snapElemRect)\n    if (this.snapDist && distText) {\n      line.appendChild(distText)\n    }\n    $parent.appendChild(line)\n  }\n  doSnap() {\n    let dragElem = this.$el\n    let snapElems = []\n    if (typeof this.snap === 'boolean') {\n      snapElems = [].slice.call(document.querySelectorAll('.draggable'))\n    }\n    else if (typeof this.snap === 'string') {\n      snapElems = [].slice.call(document.querySelectorAll(this.snap))\n    } else if (typeof this.snap === 'object' && this.snap.length) {\n      snapElems = this.snap\n    }\n\n    let dragElemRect = this.getClientRect(this.snapAnchor ? this.snapAnchor : dragElem)\n    let snapInfos = []\n    this.clearSnapLine()\n    let snapFlags = this.snapFlags\n    snapElems.forEach(item => {\n      if (item === dragElem) {\n        return\n      }\n      let itemElem = item//.$el\n      let snapElemRect: any = this.getClientRect(item.dragRef.snapAnchor ? item.dragRef.snapAnchor : itemElem)\n      let { top, height, bottom, left, width, right } = snapElemRect\n      let dragWidthHalf = dragElemRect.width / 2\n      let itemWidthHalf = width / 2\n      let dragHeightHalf = dragElemRect.height / 2\n      let itemHeightHalf = height / 2\n\n      // y c\n      if (this.isSnap(dragElemRect.top + dragHeightHalf, top + itemHeightHalf)) {\n        let snapInfo = {\n          flag: snapFlags[2],\n          snapDrag: item,\n          dragValue: top + itemHeightHalf - dragHeightHalf,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // y t-top\n      else if (this.isSnap(dragElemRect.top, top)) {\n        let snapInfo = {\n          flag: snapFlags[0],\n          dragValue: top,\n          snapDrag: item,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // y b-top\n      else if (this.isSnap(dragElemRect.bottom, top)) {\n        let snapInfo = {\n          flag: snapFlags[1],\n          snapDrag: item,\n          dragValue: top - dragElemRect.height,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n\n      // y b-bottom\n      else if (this.isSnap(dragElemRect.bottom, bottom)) {\n        let snapInfo = {\n          flag: snapFlags[3],\n          snapDrag: item,\n          dragValue: bottom - dragElemRect.height,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // y t-bottom\n      else if (this.isSnap(dragElemRect.top, bottom)) {\n        let snapInfo = {\n          flag: snapFlags[4],\n          snapDrag: item,\n          dragValue: bottom,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // y t-center\n      else if (this.isSnap(dragElemRect.top, top + itemHeightHalf)) {\n        let snapInfo = {\n          flag: snapFlags[10],\n          snapDrag: item,\n          dragValue: top + itemHeightHalf,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // y b_center\n      else if (this.isSnap(dragElemRect.bottom, bottom - itemHeightHalf)) {\n        let snapInfo = {\n          flag: snapFlags[11],\n          snapDrag: item,\n          dragValue: bottom - itemHeightHalf - dragElemRect.height,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n\n\n      // x c\n      if (this.isSnap(dragElemRect.left + dragWidthHalf, left + itemWidthHalf)) {\n        let snapInfo = {\n          flag: snapFlags[7],\n          snapDrag: item,\n          dragValue: left + itemWidthHalf - dragWidthHalf,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n\n      // x l-left\n      else if (this.isSnap(dragElemRect.left, left)) {\n        let snapInfo = {\n          flag: snapFlags[5],\n          snapDrag: item,\n          dragValue: left,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // x r-left\n      else if (this.isSnap(dragElemRect.right, left)) {\n        let snapInfo = {\n          flag: snapFlags[6],\n          snapDrag: item,\n          dragValue: left - dragElemRect.width,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n\n      // x r-right\n      else if (this.isSnap(dragElemRect.right, right)) {\n        let snapInfo = {\n          flag: snapFlags[8],\n          snapDrag: item,\n          dragValue: right - dragElemRect.width,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // x l-right\n      else if (this.isSnap(dragElemRect.left, right)) {\n        let snapInfo = {\n          flag: snapFlags[9],\n          snapDrag: item,\n          dragValue: right,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // y l-center\n      else if (this.isSnap(dragElemRect.left, left + itemWidthHalf)) {\n        let snapInfo = {\n          flag: snapFlags[12],\n          snapDrag: item,\n          dragValue: left + itemWidthHalf,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n      // y r_center\n      else if (this.isSnap(dragElemRect.right, right - itemWidthHalf)) {\n        let snapInfo = {\n          flag: snapFlags[13],\n          snapDrag: item,\n          dragValue: right - itemWidthHalf - dragElemRect.width,\n          snapElemRect: snapElemRect,\n          dragElemRect: dragElemRect\n        }\n        snapInfos.push(snapInfo)\n      }\n\n    })\n    snapInfos.forEach(snapInfo => {\n      let flags = snapInfo.flag.split('_')\n      let pos = flags[0]\n      if (dragElem.dragRef.snapAnchor) {\n        let d = 0\n        if (pos === 'left') {\n          d = dragElem.dragRef.snapAnchor.offsetLeft\n        } else if (pos === 'top') {\n          d = dragElem.dragRef.snapAnchor.offsetTop\n        }\n        dragElem.style[pos] = `${snapInfo.dragValue - d}px`\n      } else {\n        dragElem.style[pos] = `${snapInfo.dragValue}px`\n      }\n      // || snapInfo.snapDrag.isShowDist\n      if (this.snapLine) {\n        this.showSnapLine(this.containment ? this.containment : dragElem.offsetParent, snapInfo)\n      }\n    })\n\n    if (this.onSnap && snapInfos.length > 0) {\n      this.onSnap(snapInfos)\n    }\n  }\n\n}\n","import './style/index.scss';\nimport './style/common.scss';\nimport './style/patch.scss';\nrequire('./common')\nimport StageContainer from './StageContainer'\nimport ComponentBar from './ComponentBar'\nimport Header from './Header';\nimport PageConfig from './PageConfig';\nimport ToolBar from './ToolBar';\nif (process.env.NODE_ENV !== 'production') {\n  console.log('Looks like we are in development mode!');\n}\n\n$(function() {\n  let pageConfig = new PageConfig()\n  let stageCt = new StageContainer(pageConfig);\n  stageCt.createStage();\n  let componentBar = new ComponentBar(stageCt)\n  let toolbar = new ToolBar(stageCt)\n  let header = new Header(stageCt)\n})\n\n\n\n","Array.prototype.remove = function (val) {\n  var index = this.indexOf(val);\n  if (index > -1) {\n    this.splice(index, 1);\n  }\n};\n\n","import Stage from './Stage'\nimport PageConfig from './PageConfig';\nexport default class StageContainer {\n  $el: JQuery\n  stages: Array<Stage> = []\n  curStage: Stage = null\n  pageConfig: PageConfig\n  constructor(pageConfig) {\n    this.pageConfig = pageConfig\n    let $stageCt = $('.stage-ct');\n    this.stages = [];\n    this.$el = $stageCt;\n  }\n  createStage() {\n    let stage = new Stage();\n    stage.create(this.$el);\n    this.curStage = stage;\n    this.stages.push(stage);\n    this.pageConfig.setStage(stage)\n  }\n}\n","import Draggable from './Draggable';\nimport Ruler from './Ruler';\nimport Component from './Component';\nimport HotAreaComponent from './HotAreaComponent';\n\nexport default class Stage {\n  static STATE: Array<string> = ['hotarea', 'selection', 'handle']\n  EVENTS: Array<string> = []\n  isRuler: boolean = true\n  drags: Array<Draggable> = []\n  curSelectedComponent: Component = null\n  components: Array<Component> = []\n  $el: JQuery\n  $canvasWrap: JQuery\n  $canvasBox: JQuery\n  $scrollContent: JQuery\n  $canvas: JQuery\n  myScroll: any\n  selector = null\n  paddingWidth: number\n  paddingHeight: number\n  ruler: Ruler\n  pageWidth: number = 1920\n  pageHeight: number = 2561\n  state: string\n  props: any = {\n    bgColor: '#FFFFFF',\n    position: '50% 0%',\n    overflow: 'hidden'\n  }\n  id: string\n  constructor() {\n    this.EVENTS = this.isTouch() ?\n    ['touchstart', 'touchmove', 'touchend'] : ['mousedown', 'mousemove', 'mouseup'];\n    this.id = this.getRandomStr(5)\n  }\n  create($stageCt) {\n    let canvasWidth = this.pageWidth;\n    let canvasHeight = this.pageHeight;\n    let $el = $('<div class=\"stage\"></div>');\n\n    let $canvasWrap, $scrollContent, $canvas;\n\n    $stageCt.append($el);\n\n    $canvasWrap = $(`\n      <div class=\"canvas-wrap\">\n        <div>\n          <div class=\"canvas-box\">\n            <div class=\"canvas\">\n            </div>\n          </div>\n        </div>\n      </div>\n    `);\n\n    this.paddingWidth = Math.ceil($el.width() / 100) * 100;\n    this.paddingHeight = Math.ceil($el.height() / 100) * 100;\n    let ruler;\n    if (this.isRuler) {\n      ruler = new Ruler();\n      ruler.create($el);\n      $el.append($canvasWrap);\n    } else {\n      $el.append($canvasWrap);\n      $canvasWrap.css('left', 0);\n      $canvasWrap.css('top', 0)\n    }\n\n    $scrollContent = $canvasWrap.find('> div');\n    $canvas = $canvasWrap.find('.canvas');\n    this.$canvas = $canvas;\n    this.$canvasBox = $canvasWrap.find('.canvas-box');\n    this.$canvasWrap = $canvasWrap;\n    this.$el = $el;\n    this.ruler = ruler;\n    this.$scrollContent = $scrollContent;\n    // @ts-ignore\n    this.myScroll = new IScroll($canvasWrap[0], {\n      scrollX: true,\n      freeScroll: true,\n      startX: 0,\n      startY: 0,\n      probeType: 3,\n      scrollbars: true,\n      mouseWheel: true,\n      interactiveScrollbars: true,\n      disableMouse: true,\n      disablePointer: true,\n      disableTouch: true\n    });\n\n    this.layoutCanvas(canvasWidth, canvasHeight);\n\n    this.myScroll.on('scroll', function() {\n      if (ruler) {\n        ruler.setX(this.x);\n        ruler.setY(this.y)\n      }\n    });\n\n\n    let $rulerX = ruler.$rulerX[0];\n    let $rulerY = ruler.$rulerY[0];\n\n    let EVENTS = this.EVENTS;\n\n    $rulerX.addEventListener(EVENTS[0], event => {\n      let $guideLine = $('<div class=\"guide-line guide-lineX\"><div></div></div>');\n      this.$el.append($guideLine)\n      let drag = new Draggable($guideLine[0], {\n        snapAnchor: $guideLine[0].children[0],\n        minLeft: 20,\n        axis: 'y',\n        cursor: 'row-resize',\n        resizable: false,\n      })\n      $guideLine.css('top', (event.clientY - this.$el[0].getBoundingClientRect().top - $guideLine[0].children[0]['offsetTop']) + 'px')\n      drag.start(event)\n      drag.onStop = function(event) {\n        if (drag.$el.offsetTop <= 15) {\n          $(drag.$el).remove();\n        }\n      }\n    })\n\n    $rulerY.addEventListener(EVENTS[0], event => {\n      let $guideLine = $('<div class=\"guide-line guide-lineY\"><div></div></div>');\n      this.$el.append($guideLine)\n\n      let drag = new Draggable($guideLine[0], {\n        snapAnchor: $guideLine[0].children[0],\n        minTop: 20,\n        axis: 'x',\n        cursor: 'col-resize',\n        resizable: false,\n      })\n      $guideLine.css('left', (event.clientX - this.$el[0].getBoundingClientRect().left - $guideLine[0].children[0]['offsetLeft']) + 'px')\n      drag.start(event)\n      drag.onStop = function(event) {\n        if (drag.$el.offsetLeft <= 15) {\n          $(drag.$el).remove();\n        }\n      }\n\n    })\n\n    this.selector = $scrollContent.selectable({\n      disabled: true\n    });\n    this.setState(Stage.STATE[0])\n    this.setupEvent();\n\n  }\n\n  layoutCanvas(canvasWidth, canvasHeight) {\n    let startX = 0, startY = 0, marginLeft = 0, marginTop = 0;\n    let scrollContentWidth = canvasWidth, scrollContentHeight = canvasHeight;\n    marginLeft = this.paddingWidth / 2;\n    marginTop = this.paddingHeight / 2;\n    scrollContentWidth = Math.ceil(canvasWidth / 50) * 50 + this.paddingWidth;\n    scrollContentHeight = Math.ceil(canvasHeight / 50) * 50 + this.paddingHeight;\n    if (canvasWidth < this.$canvasWrap.width()) {\n      startX = scrollContentWidth / 2 - this.$canvasWrap.width() / 2;\n    } else {\n      startX = this.paddingWidth / 2;\n    }\n    if (canvasHeight < this.$canvasWrap.height()) {\n      startY = scrollContentHeight / 2 -this.$canvasWrap.height() / 2;\n    } else {\n      startY = this.paddingHeight / 2\n    }\n    this.ruler.update(canvasWidth, canvasHeight, this.paddingWidth, this.paddingHeight);\n    if (this.ruler) {\n      this.ruler.setX(-startX);\n      this.ruler.setY(-startY);\n    }\n    this.$canvas.width(canvasWidth)\n    this.$canvas.height(canvasHeight)\n    // this.$canvas.css('margin-left', marginLeft + 'px')\n    // this.$canvas.css('margin-top', marginTop + 'px')\n    this.$canvasBox.width(canvasWidth)\n    this.$canvasBox.height(canvasHeight)\n    this.$canvasBox.css('margin-left', marginLeft + 'px')\n    this.$canvasBox.css('margin-top', marginTop + 'px')\n    this.$scrollContent.width(scrollContentWidth)\n    this.$scrollContent.height(scrollContentHeight)\n    this.myScroll.scrollTo(-startX, -startY)\n    this.myScroll.refresh()\n  }\n\n  setCanvasSize(canvasWidth, canvasHeight) {\n    this.pageWidth = canvasWidth\n    this.pageHeight = canvasHeight\n    this.layoutCanvas(canvasWidth, canvasHeight)\n  }\n\n\n  setupEvent() {\n    let EVENTS = this.EVENTS;\n\n    let stageElem = this.$el[0]\n    let canvasElem = this.$canvas[0];\n    stageElem.addEventListener(EVENTS[1], event => {\n      let canvasRect = canvasElem.getBoundingClientRect();\n      let eventInfo: any = this.getEventInfo(event);\n      let left = eventInfo.clientX - canvasRect.left;\n      let top = eventInfo.clientY - canvasRect.top;\n      if (left >= 0 && top >= 0 && left < this.$canvas.width() && top < this.$canvas.height()) {\n        this.ruler.setCursorPos(left, top)\n        this.ruler.showCursor();\n      } else {\n        this.ruler.hideCursor();\n      }\n    })\n\n    canvasElem.addEventListener(EVENTS[0], event => {\n      if (event.target !== canvasElem || this.state !== Stage.STATE[0]) {\n        return\n      }\n      let canvasRect = canvasElem.getBoundingClientRect();\n      this.unselectComponent();\n      let that = this;\n      let eventInfo: any = this.getEventInfo(event);\n      let startX = eventInfo.clientX;\n      let startY = eventInfo.clientY;\n      let component = new HotAreaComponent();\n      this.addComponent(component)\n      component.select()\n      component.showToolbar()\n      function move(event) {\n        event = that.getEventInfo(event)\n        let curStartX = event.clientX;\n        let curStartY = event.clientY;\n        let left, top, width, height;\n        if (curStartX < startX) {\n          left = curStartX;\n          width = startX -curStartX;\n        } else {\n          left = startX;\n          width = curStartX - startX;\n        }\n\n        if (curStartY< startY) {\n          top = curStartY;\n          height = startY -curStartY;\n        } else {\n          top = startY;\n          height = curStartY - startY;\n        }\n        that.setElementPos(component.$el, left - canvasRect.left, top - canvasRect.top, width, height)\n        component.resetPositionInfo()\n      }\n      function end(event) {\n        if (component.width() < component.minWidth || component.height() < component.minHeight) {\n          that.removeComponent(component);\n        }\n        document.removeEventListener(EVENTS[1], move)\n        document.removeEventListener(EVENTS[2], end)\n      }\n\n      document.addEventListener(EVENTS[1], move)\n      document.addEventListener(EVENTS[2], end)\n    })\n  }\n\n  setState(state) {\n    this.state = state\n    if (state === Stage.STATE[1]) {\n      this.selector.selectable('option', 'disabled', false);\n    } else {\n      this.selector.selectable('option', 'disabled', true);\n    }\n  }\n\n  unselectComponent() {\n    if (this.curSelectedComponent) {\n      this.curSelectedComponent.unselect();\n      this.curSelectedComponent = null;\n    }\n  }\n\n  selectComponent(component) {\n    if (this.curSelectedComponent != null && this.curSelectedComponent != component) {\n      this.curSelectedComponent.unselect();\n    }\n    component.select();\n    this.curSelectedComponent = component;\n  }\n\n  setElementPos($elem, left, top, width, height) {\n    $elem.css('left', left + 'px')\n    $elem.css('top', top + 'px')\n    $elem.css('width', width + 'px')\n    $elem.css('height', height + 'px')\n  }\n\n  isTouch() {\n    return 'ontouchstart' in window;\n  }\n\n  getEventInfo(event) {\n    return this.isTouch() ? event.targetTouches[0] : event\n  }\n\n\n  removeComponent(component) {\n    component.remove();\n    // @ts-ignore\n    this.components.remove(component)\n  }\n\n  addComponent(component) {\n    component.mount(this);\n    this.components.push(component)\n  }\n\n  setComponentAllowOverstep(allowOverstep) {\n    this.components.forEach((component) => {\n      if (allowOverstep) {\n        component['drag'].option('containment', false)\n      } else {\n        component['drag'].option('containment', 'parent')\n      }\n    })\n  }\n\n  generateJsonCode() {\n    this.props.width = this.pageWidth\n    this.props.height = this.pageHeight\n    this.props.app = []\n    this.components.forEach((component) => {\n      this.props.app.push(component.getProps())\n    })\n    return JSON.stringify(this.props)\n  }\n\n  generateHtmlCode() {\n    let appsHtml = []\n    this.components.forEach((component) => {\n      appsHtml.push(component.toHtml())\n    })\n    return `<div style=\"position: relative; overflow: hidden;width: ${this.pageWidth}px; height: ${this.pageHeight}px;background: ${this.props.bgColor};\">\n      ${appsHtml.join('')}\n    </div>`\n  }\n\n  getRandomStr(len) {\n    let charArr = []\n    const chars = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\n    while (len--) {\n      charArr.push(chars[Math.floor(chars.length * Math.random())])\n    }\n    return charArr.join('')\n  }\n\n}\n","export default class Ruler {\n  $el: JQuery\n  $rulerX: JQuery\n  $rulerY: JQuery\n  $cursorPosX: JQuery\n  $cursorPosY: JQuery\n  canvasWidth: number\n  canvasHeight: number\n  paddingWidth: number\n  paddingHeight: number\n  width: number\n  height: number\n  constructor() {\n  }\n  create($ct) {\n    let $el = $(`\n      <div class=\"ruler\">\n        <div class=\"rulerX\">\n          <div>\n            <div class=\"cursor-pos\"><span>0</span></div>\n          </div>\n        </div>\n        <div class=\"rulerY\">\n          <div>\n            <div class=\"cursor-pos\"><span>0</span></div>\n          </div>\n        </div>\n      </div>\n    `);\n    let $rulerX = $el.find('.rulerX > div');\n    let $rulerY = $el.find('.rulerY > div');\n    this.$el = $el;\n    this.$rulerX = $rulerX;\n    this.$rulerY = $rulerY;\n    this.$cursorPosX = $rulerX.find('.cursor-pos');\n    this.$cursorPosY = $rulerY.find('.cursor-pos');\n    $ct.append(this.$el);\n  }\n  draw() {\n    let canvasWidth = this.canvasWidth;\n    let canvasHeight = this.canvasHeight;\n    let paddingWidth = this.paddingWidth;\n    let paddingHeight = this.paddingHeight;\n    // let paddingWidth = Math.ceil(canvasWidth / 3 / 50) * 50 * 2;\n    // paddingWidth = 1400;\n    let rulerWidth = Math.ceil(canvasWidth / 50) * 50 + paddingWidth;\n    // let paddingHeight = Math.ceil(canvasHeight / 3 / 50) * 50 * 2;\n    // paddingHeight = 700;\n    let rulerHeight = Math.ceil(canvasHeight / 50) * 50 + paddingHeight;\n\n    this.paddingHeight = paddingHeight;\n    this.paddingWidth = paddingWidth;\n    this.width = rulerWidth;\n    this.height = rulerHeight;\n\n    let initXValue = -(paddingWidth / 2);\n    let ruleXSpans = '';\n    for (let i = 0; i < rulerWidth / 50; i++) {\n      ruleXSpans += `<span>${Math.abs(initXValue + i * 50)}</span>`;\n    }\n\n    let initYValue = -(paddingHeight / 2);\n    let ruleYSpans = '';\n    for (let i = 0; i < rulerHeight / 50; i++) {\n      ruleYSpans += `<span>${Math.abs(initYValue + i * 50)}</span>`;\n    }\n    this.$rulerX.append(ruleXSpans)\n    this.$rulerX.width(rulerWidth)\n\n    this.$rulerY.append(ruleYSpans)\n    this.$rulerY.height(rulerHeight)\n  }\n\n  update(canvasWidth, canvasHeight, paddingWidth, paddingHeight) {\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.paddingWidth = paddingWidth;\n    this.paddingHeight = paddingHeight;\n    this.$rulerX.find('> span').remove();\n    this.$rulerY.find('> span').remove();\n    this.draw();\n  }\n\n  showCursor() {\n    this.$cursorPosX.show();\n    this.$cursorPosY.show();\n  }\n  hideCursor() {\n    this.$cursorPosX.hide();\n    this.$cursorPosY.hide();\n  }\n\n  setCursorPos(x, y) {\n    this.$cursorPosX.css('left', (this.paddingWidth / 2 + x) + 'px')\n    this.$cursorPosY.css('top', (this.paddingHeight / 2 + y) + 'px')\n    this.$cursorPosX.find('span').text(Math.ceil(x))\n    this.$cursorPosY.find('span').text(Math.ceil(y))\n  }\n\n  setX(x) {\n    this.$rulerX.css('left', x + 'px')\n  }\n\n  setY(y) {\n    this.$rulerY.css('top', y + 'px')\n  }\n}\n\n","import Component from './Component';\nexport default class HotAreaComponent extends Component {\n  constructor() {\n    super('hotarea-component')\n    let content = `\n        <div class=\"hot-area-box\"></div>\n      `\n    this.$contentBox.append(content)\n  }\n  getProps() {\n    return {}\n  }\n  toHtml() {\n    return ''\n  }\n}\n","import ImgComponent from './ImgComponent'\nimport TextComponent from './TextComponent'\nimport StageContainer from './StageContainer';\nimport Stage from './Stage';\nexport default class ComponentBar {\n  stageCt: StageContainer\n  $el: JQuery\n  constructor(stageCt) {\n    this.stageCt = stageCt;\n    let $el = $('.component-bar');\n    this.$el = $el;\n    let curStage: Stage = stageCt.curStage\n    $el.find('li').bind('mousedown', function(event) {\n      let name = $(this).data('name')\n      let component = null;\n      let initX = Math.abs(curStage.myScroll.x) - curStage.paddingWidth / 2\n      let initY = Math.abs(curStage.myScroll.y) - curStage.paddingHeight / 2\n      if (name === 'img-component') {\n        component = new ImgComponent();\n      } else if (name === 'text-component') {\n        component = new TextComponent();\n      }\n      component.$el.css('left', Math.max(initX, 0) + 'px')\n      component.$el.css('top', Math.max(initY, 0) + 'px')\n      curStage.addComponent(component)\n      curStage.selectComponent(component)\n    })\n  }\n}\n","import Component from './Component';\nexport default class ImgComponent extends Component {\n  $content: JQuery\n  $img: JQuery\n  constructor() {\n    super('img-component')\n    this.$content = $('<a><img src=\"\" style=\"display:none\"></a>')\n    this.$img = this.$content.find('img')\n    this.$contentBox.append(this.$content)\n    let that = this;\n    this.$topBar.find('.setting').bind('click', function() {\n      that.openEditDialog();\n    })\n    this.$el.dblclick(function() {\n      that.openEditDialog();\n    })\n    this.initFormData()\n  }\n\n  toHtml() {\n    let top, left, width, height\n    top = this.$el.css('top')\n    left = this.$el.css('left')\n    width = this.$el.width()\n    height = this.$el.height()\n    let img = ''\n    let background = `url(${this.formData.bgImg}) 50% 50% no-repeat;`\n    if (this.formData.imgMode === 'cut') {\n      background = `url(${this.formData.bgImg}) 50% 50% no-repeat;`\n    } else {\n      img = this.$img[0].outerHTML\n    }\n    return `\n      <a href=\"${this.formData.href}\" target=\"${this.formData.hrefMode || ''}\" style=\"position: absolute; top: ${top}; left: ${left}; width: ${width}px; height: ${height}px;background: ${background}\">\n        ${img}\n      </a>\n    `\n  }\n\n  initFormData() {\n    this.formData.bgImg = 'https://img.alicdn.com/imgextra/i2/280837244/TB2orubcrJmpuFjSZFwXXaE4VXa-280837244.jpg'\n    this.formData.bgColor = ''\n    this.formData.appLabel = ''\n    this.formData.imgMode = 'cut'\n    this.formData.linkMode = 'urlink'\n    this.formData.href = ''\n    this.formData.tipText = ''\n    this.formData.animType = ''\n    this.formData.hrefMode = false\n    this.formData.bgImgSize = false\n    this.formData.animSpeed = '1s'\n    this.formData.animRange = '-s'\n    this.formData.wangID = ''\n\n    this.$content.css('background-image', `url(${this.formData.bgImg})`)\n    this.$content.css('background-color', this.formData.bgColor)\n    this.$img.attr('src', this.formData.bgImg)\n  }\n\n  onLinkModeChanged($layerElem, linkMode) {\n    let $wangIDInputBox = $layerElem.find('.wangID-input-box')\n    let $hrefInputBox = $layerElem.find('.href-input-box')\n    if (linkMode === 'urlink') {\n      $wangIDInputBox.hide()\n      $hrefInputBox.show()\n    } else if (linkMode === 'wwlink') {\n      $hrefInputBox.hide()\n      $wangIDInputBox.show()\n    }\n  }\n\n  openEditDialog() {\n    let that = this;\n    let layer = layui.layer;\n    let $layerElem = null;\n    let layerNo = layer.open({\n      type: 1,\n      title: '单图设置',\n      skin: 'layui-layer-rim', //加上边框\n      area: ['600px', '600px'],\n      success: function(layerElem, index) {\n        $layerElem = $(layerElem)\n        if (typeof that.formData.animType === 'undefined') {\n          that.formData.animType = ''\n        }\n        $layerElem.find(`.animselect > div[data-val=\"${that.formData.animType}\"]`).addClass('active')\n        $layerElem.find('.animselect > div').on('click', function() {\n          $layerElem.find('.animselect > div.active').removeClass('active')\n          $(this).addClass('active')\n        })\n\n        if (that.formData.bgColor) {\n          $layerElem.find('.sp-preview-inner').css('background-color', that.formData.bgColor)\n        }\n        $layerElem.find('.cancel-btn').on('click', function() {\n          layer.close(index)\n        })\n        that.onLinkModeChanged($layerElem, that.formData.linkMode)\n\n      },\n      content: `<form class=\"layui-form\" lay-filter=\"imgComponentForm\">\n        <div class=\"layui-tab layui-tab-brief\">\n          <ul class=\"layui-tab-title\">\n            <li class=\"layui-this\">内容设置</li>\n            <li>动画设置</li>\n          </ul>\n          <div class=\"layui-tab-content\">\n            <div class=\"layui-tab-item layui-show\">\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">应用名称</label>\n                <div class=\"layui-input-inline\">\n                  <input type=\"text\" name=\"appLabel\" class=\"layui-input\">\n                </div>\n              </div>\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">图片地址</label>\n                <div class=\"layui-input-inline\">\n                  <input name=\"bgImg\" type=\"text\" class=\"layui-input\">\n                </div>\n                <div><input name=\"bgImgSize\" value=\"true\" type=\"checkbox\" lay-skin=\"primary\" title=\"自动宽高\"></div>\n              </div>\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">图片显示方式</label>\n                <div class=\"layui-input-inline\">\n                  <select name=\"imgMode\">\n                    <option value=\"cut\">保持原图尺寸</option>\n                    <option value=\"full\">自由拉伸</option>\n                    <option value=\"scaleX\">保持比例(只裁剪宽度)</option>\n                    <option value=\"scaleY\">保持比例(只裁剪高度)</option>\n                  </select>\n                </div>\n              </div>\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">背景颜色</label>\n                <div class=\"layui-input-inline\" style=\"position:relative\">\n                  <div class=\"sp-replacer sp-light\" style=\"z-index: 2;bottom: auto;top: 10px\">\n                    <div class=\"sp-preview\">\n                      <div class=\"sp-preview-inner\"></div>\n                    </div>\n                  </div>\n                  <input style=\"text-indent:28px;\" name=\"bgColor\" type=\"text\" class=\"layui-input pagecolor\">\n                  <span class=\"clear-color-button\" style=\"right: 5px\"></span>\n                </div>\n              </div>\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">链接类型</label>\n                <div class=\"layui-input-inline\">\n                  <input type=\"radio\" name=\"linkMode\" lay-filter=\"linkMode\" value=\"urlink\" title=\"普通\" checked=\"\">\n                  <input type=\"radio\" name=\"linkMode\" lay-filter=\"linkMode\" value=\"wwlink\" title=\"旺旺\">\n                </div>\n              </div>\n              <div class=\"layui-form-item href-input-box\" style=\"display:none\">\n                <label class=\"layui-form-label\">链接地址</label>\n                <div class=\"layui-input-inline\">\n                  <input name=\"href\" type=\"text\" class=\"layui-input\">\n                </div>\n                <div><input name=\"hrefMode\" value=\"_blank\" type=\"checkbox\" lay-skin=\"primary\" title=\"新窗口打开\"></div>\n              </div>\n              <div class=\"layui-form-item wangID-input-box\" style=\"display:none\">\n                <label class=\"layui-form-label\">旺旺ID</label>\n                <div class=\"layui-input-inline\">\n                  <input name=\"wangID\" type=\"text\" class=\"layui-input\">\n                </div>\n              </div>\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">提示文字</label>\n                <div class=\"layui-input-inline\">\n                  <input name=\"tipText\" type=\"text\" class=\"layui-input\">\n                </div>\n              </div>\n            </div>\n            <div class=\"layui-tab-item\" style=\"min-height: 356px\">\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">动画效果</label>\n                <div class=\"layui-input-inline\">\n                  <div class=\"animselect ui-buttonset\">\n                    <div class=\"none\" data-val=\"\"><i><em></em></i>无效果</div>\n                    <div class=\"shakex\" data-val=\"xins-x-shake\"><i><em></em></i>左右抖动</div>\n                    <div class=\"shakey\" data-val=\"xins-y-shake\"><i><em></em></i>上下抖动</div>\n                    <div class=\"shaker\" data-val=\"xins-r-shake\"><i><em></em></i>旋转摆动</div>\n                    <div class=\"shakes\" data-val=\"xins-s-shake\"><i><em></em></i>弹性缩放</div>\n                    <div class=\"shaken\" data-val=\"xins-n-shake\"><i><em></em></i>弹性果冻</div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">动画幅度</label>\n                <div class=\"layui-input-inline\">\n                  <input type=\"radio\" name=\"animRange\" value=\"-s\" title=\"弱\" checked=\"\">\n                  <input type=\"radio\" name=\"animRange\" value=\"-m\" title=\"中\">\n                  <input type=\"radio\" name=\"animRange\" value=\"-l\" title=\"强\">\n                </div>\n              </div>\n              <div class=\"layui-form-item\">\n                <label class=\"layui-form-label\">图片显示方式</label>\n                <div class=\"layui-input-inline\">\n                  <select name=\"animSpeed\">\n                    <option value=\"1s\" selected=\"\">1秒</option>\n                    <option value=\"2s\">2秒</option>\n                    <option value=\"3s\">3秒</option>\n                    <option value=\"4s\">4秒</option>\n                    <option value=\"5s\">5秒</option>\n                    <option value=\"6s\">6秒</option>\n                    <option value=\"7s\">7秒</option>\n                    <option value=\"8s\">8秒</option>\n                    <option value=\"9s\">9秒</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"layui-form-item\">\n          <div class=\"layui-input-block\" style=\"margin-left: 440px;margin-top: 20px\">\n            <button class=\"layui-btn\" lay-submit lay-filter=\"imgComponentForm\">确定</button>\n            <button type=\"button\" class=\"cancel-btn layui-btn layui-btn-primary\">取消</button>\n          </div>\n        </div>\n      </form>`\n    });\n    var form = layui.form\n    form.render();\n\n    form.on('radio(linkMode)', function(data){\n      console.log(data)\n      that.onLinkModeChanged($layerElem, data.value)\n    })\n\n    form.on('submit(imgComponentForm)', function(data) {\n      if (data.field.bgImg !== that.formData.bgImg) {\n        that.$content.css('background-image', `url(${data.field.bgImg})`)\n        that.$img.attr('src', data.field.bgImg)\n      }\n      if (data.field.bgColor !== that.formData.bgColor) {\n        that.$content.css('background-color', data.field.bgColor)\n      }\n      that.formData = data.field;\n      if (that.formData.bgImgSize === 'true') {\n        that.$el.width(that.$img.width())\n        that.$el.height(that.$img.height())\n      }\n      let imgMode = that.formData.imgMode\n      if (imgMode === 'cut') {\n        if (that.$img.is(':visible')) {\n          that.$content.css('background-image', `url(${that.formData.bgImg})`)\n          that.$img.hide()\n        }\n      } else {\n        that.$content.css('background-image', '')\n        if (imgMode === 'full') {\n          that.$img.css('width', '100%')\n          that.$img.css('height', '100%')\n        } else if (imgMode === 'scaleX') {\n          that.$img.css('height', '100%')\n          that.$img.css('width', '')\n        } else if (imgMode === 'scaleY') {\n          that.$img.css('width', '100%')\n          that.$img.css('height', '')\n        }\n        that.$img.show()\n      }\n\n      that.formData.animType = $layerElem.find('.animselect > div.active').data('val')\n      console.log(that.formData)\n      layer.close(layerNo)\n      return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。\n    });\n    form.val('imgComponentForm', that.formData)\n  }\n  getProps() {\n    let config = this.formData;\n    config.appID = `${this.stage.id}-${this.id}`\n    return {\n      'appType': 'xdtb',\n      'config': config,\n      'pos': {\n        w: this.width(),\n        h: this.height(),\n        l: parseInt(this.$el.css('left')),\n        t: parseInt(this.$el.css('top'))\n      }\n    }\n  }\n}\n","import Component from './Component';\nexport default class TextComponent extends Component {\n  constructor() {\n    super('text-component')\n    let content = `\n        <a>请双击设置文件内容</a>\n      `\n    this.$contentBox.append(content)\n  }\n  getProps() {\n    return {}\n  }\n  toHtml() {\n    return ''\n  }\n}\n","import StageContainer from \"./StageContainer\";\n\nexport default class Header {\n  $el: JQuery\n  stageCt: StageContainer\n  constructor(stageCt: StageContainer) {\n    this.stageCt = stageCt\n    this.$el = $('.header')\n    let that = this;\n    this.$el.find('.export-btn').bind('click', function() {\n      that.openExportDialog()\n    })\n\n    this.$el.find('.preview-btn').bind('click', function() {\n      let previewWin = window.open('')\n      let url = window.location.href\n      previewWin.document.write(`<html><head><title></title><link rel=\"stylesheet\" type=\"text/css\" href=\"${url}css/common.css\"></head><body>`);\n      previewWin.document.write(that.stageCt.curStage.generateHtmlCode());\n      previewWin.document.write('</body></html>');\n      previewWin.focus()\n      previewWin.document.title = '预览'\n    })\n\n  }\n\n  generateJsonCode() {\n    let curStage = this.stageCt.curStage\n  }\n\n  openExportDialog() {\n    let that = this;\n    let layer = layui.layer;\n    let layerNo = layer.open({\n      type: 1,\n      title: '生成代码',\n      skin: 'layui-layer-rim', //加上边框\n      area: ['600px', '550px'],\n      success: function(layerElem, index) {\n        let $layerElem = $(layerElem)\n        let $jsonTextArea = $layerElem.find('#jsonTextArea')\n        let $htmlTextArea = $layerElem.find('#htmlTextArea')\n        $jsonTextArea.val(that.stageCt.curStage.generateJsonCode())\n        $htmlTextArea.val(that.stageCt.curStage.generateHtmlCode())\n        $layerElem.find('.page-width').val(that.stageCt.curStage.pageWidth)\n        $layerElem.find('.page-height').val(that.stageCt.curStage.pageHeight)\n      },\n      content: `\n        <div class=\"codegen\" style=\"padding: 15px 10px\">\n          <div class=\"codegen-head\">\n            <ul>\n              <li>\n                <label><span style=\"margin-left:10px;\">当前模块宽</span>&nbsp;</label>\n                <input class=\"page-width\" style=\"width:40px;\" type=\"text\" spellcheck=\"false\">\n                <label>&nbsp;&nbsp;高&nbsp;</label>\n                <input class=\"page-height\" style=\"width:40px;\" type=\"text\" spellcheck=\"false\">\n                <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当内容超出模块范围时：&nbsp;</label>\n                <div id=\"rm_o1\">\n                  <input class=\"cfgl-rr\" type=\"radio\" id=\"m_o2\" name=\"overflowMode\" value=\"visible\" spellcheck=\"false\">\n                  <label class=\"cfgl-radio cfgl-radio-checked\" for=\"m_o2\" title=\"\" style=\"border-right:none;border-radius:2px 0 0 2px;\">显示</label>\n                  <input class=\"cfgl-rr\" type=\"radio\" id=\"m_o1\" name=\"overflowMode\" checked=\"checked\" value=\"hidden\" spellcheck=\"false\">\n                  <label class=\"cfgl-radio\" for=\"m_o1\" title=\"\" style=\"border-left:none;border-radius:0 2px 2px 0;\">裁掉</label>\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div class=\"layui-tab\">\n            <ul class=\"layui-tab-title\" style=\"font-size: 12px\">\n              <li style=\"font-size: 12px\" class=\"layui-this\">JSON代码</li>\n              <li style=\"font-size: 12px\">HTML代码</li>\n            </ul>\n            <div class=\"layui-tab-content\">\n              <div class=\"layui-tab-item layui-show\">\n                <textarea id=\"jsonTextArea\"style=\"float:left;width:100%;height:320px;\" readonly spellcheck=\"false\"></textarea>\n              </div>\n              <div class=\"layui-tab-item\">\n                <textarea id=\"htmlTextArea\"style=\"float:left;width:100%;height:320px;\" readonly spellcheck=\"false\"></textarea>\n              </div>\n            </div>\n          </div>\n        </div>`\n    });\n  }\n}\n","import Stage from \"./Stage\";\n\nexport default class PageConfig {\n  stage: Stage\n  pageWidth: number = 0\n  pageHeight: number = 0\n  $inputWidth: JQuery\n  $inputHeight: JQuery\n\n  constructor() {\n    let $el = $('.page-config');\n    let $inputWidth = $el.find('.input-width');\n    let $inputHeight = $el.find('.input-height');\n    let $inputBg = $el.find('.input-bg');\n    let $calcWidth = $el.find('.calc-width');\n    let $calcHeight = $el.find('.calc-height');\n    let $alignSelect = $el.find('.align-select');\n    let $allowOverstep = $el.find('#allowOverstep')\n\n    this.$inputWidth = $inputWidth\n    this.$inputHeight = $inputHeight\n\n    let align = '50% 0'\n    let that = this;\n    // @ts-ignore\n    //颜色选择器\n    $(document).spectrum({\n      showPalette : !0,\n      maxSelectionSize : 18,\n      showInitial : !0,\n      preferredFormat : 'hex',\n      showButtons : !1,\n      palette: [\n          ['#000','#444','#666','#999','#ccc','#eee','#f3f3f3','#fff'],\n          ['#f00','#f90','#ff0','#0f0','#0ff','#00f','#90f','#f0f'],\n          ['#900','#b45f06','#bf9000','#38761d','#134f5c','#0b5394','#351c75','#741b47']\n      ],\n      move: function(color, $input) {\n        let id = $input.attr('id')\n        if (id === 'inputBgColor' && that.stage) {\n          if (!color) {\n            that.stage.$canvasBox.addClass('bg-trans');\n            that.stage.$canvas.css('background-color', 'transparent');\n            that.stage.props.bgColor = 'transparent'\n          }\n          if (typeof color === 'object') {\n            let colorHex = color.toHexString()\n            that.stage.$canvasBox.removeClass('bg-trans')\n            that.stage.$canvas.css('background-color', colorHex + '');\n            that.stage.props.bgColor = colorHex\n          }\n        }\n      }\n    }).spectrum.freshSpan();\n\n    $inputWidth.bind('input', function() {\n      that.pageWidth = +$(this).val();\n      that.stage.setCanvasSize(that.pageWidth, that.pageHeight)\n    });\n\n    $inputHeight.bind('input', function() {\n      that.pageHeight = +$(this).val();\n      that.stage.setCanvasSize(that.pageWidth, that.pageHeight)\n    });\n\n    $inputBg.bind('input', function() {\n      let img = $(this).val()\n      that.stage.props.bgImg = img\n      that.stage.$canvas.css('background-image',  `url(\"${img}\")`)\n    })\n    $alignSelect.change(function() {\n      let alignValue = $(this).val()\n      that.stage.$canvas.css('background-position', `${alignValue}`)\n      that.stage.props.position = alignValue\n    })\n\n    $allowOverstep.bind('click', function() {\n      if ($allowOverstep.hasClass('active')) {\n        $allowOverstep.removeClass('active')\n        that.stage.props.overflow = 'hidden'\n        that.stage.setComponentAllowOverstep(false)\n      } else {\n        $allowOverstep.addClass('active')\n        that.stage.props.overflow = 'visible'\n        that.stage.setComponentAllowOverstep(true)\n      }\n    })\n    $el.find('.bgImg-box .page-check').bind('click', function() {\n      let $this = $(this)\n      let val = $this.data('val')\n      console.log(val)\n      if ($this.hasClass('active')) {\n        $this.removeClass('active')\n        if (val === 'repeat') {\n          that.stage.$canvas.css('background-repeat', '')\n          that.stage.props.repeat = ''\n        }\n        if (val === 'fixed') {\n          that.stage.$canvas.css('background-attachment', '')\n          that.stage.props.attachment = ''\n        }\n\n      } else {\n        $this.addClass('active')\n        if (val === 'repeat') {\n          that.stage.$canvas.css('background-repeat', 'repeat')\n          that.stage.props.repeat = 'repeat'\n        }\n        if (val === 'fixed') {\n          that.stage.$canvas.css('background-attachment', 'fixed')\n          that.stage.props.attachment = 'fixed'\n        }\n      }\n    })\n  }\n\n  setStage(stage) {\n    this.stage = stage\n    this.pageWidth = stage.pageWidth;\n    this.pageHeight = stage.pageHeight;\n    this.$inputWidth.val(this.pageWidth)\n    this.$inputHeight.val(this.pageHeight)\n  }\n}\n","import ToolConfig from './ToolConfig'\nimport StageContainer from './StageContainer';\nexport default class Toolbar {\n  $el: JQuery\n  stageCt: StageContainer\n  constructor(stageCt) {\n    this.stageCt = stageCt\n    let $settingBar = $('.setting-bar')\n    let $pageConfig = $settingBar.find('.page-config')\n    let $assistConfig = $settingBar.find('.assist-config')\n    let $magnetConfig = $settingBar.find('.magnet-config')\n    let $curSetting = $pageConfig\n    let $el = $('.toolbar')\n    let $curItem = $el.find('.group3.active')\n    let $curItemOfGroup1 = $el.find('.group1.active')\n    this.$el = $el\n    let that = this\n    $el.find('li').bind('click', function(event) {\n      let $this = $(this)\n      let name = $this.data('name')\n      if (name === 'draggable') {\n        ToolConfig.draggable = !ToolConfig.draggable\n        let $icon = $this.find('icon')\n        if (ToolConfig.draggable) {\n          $icon.text('ꑸ')\n          $icon.removeClass('color0')\n          $icon.addClass('color1')\n        } else {\n          $icon.text('ꑹ')\n          $icon.removeClass('color1')\n          $icon.addClass('color0')\n        }\n      } else if (name === 'assist' || name === 'magnet' || name === 'page') {\n        let $setting = $(`.${name}-config`)\n        if (!$curSetting.is($setting)) {\n          $curSetting.hide()\n          $curSetting = $setting\n          $curSetting.show()\n          $curItem.removeClass('active')\n          $this.addClass('active')\n          $curItem = $this\n        }\n      } else if (name === 'hotarea' || name === 'selection' || name === 'handle') {\n        if ($this !== $curItemOfGroup1) {\n          $curItemOfGroup1.removeClass('active')\n          $this.addClass('active')\n          $curItemOfGroup1 = $this\n          that.stageCt.curStage.setState(name)\n        }\n      }\n    })\n  }\n}\n","export default class ToolConfig {\n  static draggable: boolean = true\n}\n"],"sourceRoot":""}